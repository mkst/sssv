#include <ultra64.h>
#include "common.h"


// ========================================================
// externs
// ========================================================

extern Gfx D_01004680_3DF50[];
extern Gfx D_010047D0_3E0A0[];
extern Gfx D_01004828_3E0F8[];
extern Gfx D_01004720_3DFF0[];

extern u8  D_01020DB0_5A680[];
extern u8  D_010215B0_5AE80[];
extern u8  D_010226D0_5BFA0[];
extern u8  D_01022ED0_5C7A0[];
extern u8  D_01023550_5CE20[];
extern u8  D_01023D50_5D620[];
extern u8  D_01024550_5DE20[]; // 512 bytes per image
extern u8  D_01025750_5F020[]; // 512 bytes per image
extern u8  D_01026950_60220[];
extern u8  D_01027B50_61420[];
extern u8  D_01028D50_62620[];
extern u8  D_01029550_62E20[];
extern u8  D_0102C210_65AE0[];
extern u8  D_0102CA10_662E0[];

extern Gfx *D_801D9EB0;

// ========================================================
// .data
// ========================================================

#if 0
struct098 D_803A1BB0_7B3260[16] = {
    { 0.5f, 110, },
    { 0.5609999895095825f, 110, },
    { 0.6290000081062317f, 110, },
    { 0.6669999957084656f, 110, },
    { 0.7490000128746033f, 110, },
    { 0.8399999737739563f, 110, },
    { 0.9430000185966492f, 110, },
    { 0.7490000128746033f, 5, },
    { 0.8399999737739563f, 5, },
    { 0.9430000185966492f, 5, },
    { 1.0f, 5, },
    { 0.7490000128746033f, 4, },
    { 0.8399999737739563f, 4, },
    { 0.9430000185966492f, 4, },
    { 1.0f, 4, },
    { 1.0f, 3, },
};

s32 D_803A1C30_7B32E0[] = {
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000
};


u16 D_803A20B0_7B3760[] = {
    GPACK_RGBA5551(104, 248, 248, 1), // cyan
    GPACK_RGBA5551(136, 88, 232, 1),  // purple
    GPACK_RGBA5551(176, 248, 248, 1), // light blue
    GPACK_RGBA5551(224, 240, 248, 1), // light grey
    GPACK_RGBA5551(248, 112, 248, 1), // magenta
    GPACK_RGBA5551(24, 248, 0, 1),    // bright green
    GPACK_RGBA5551(248, 104, 80, 1),  // red/orange
    GPACK_RGBA5551(32, 48, 248, 1),   // blue
};

// probably not quite right?
struct099 D_803A20C0_7B3770[] = {
    { 0x004E, 0x14, 0x00, 0x001B, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x55, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x28, 0x00, 0x0024, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x65, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x50, 0x00, 0x0012, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x75, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x14, 0x00, 0x001B, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x55, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x28, 0x00, 0x0024, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x65, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x50, 0x00, 0x0012, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x75, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x14, 0x00, 0x001B, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x55, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x28, 0x00, 0x0024, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x65, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x50, 0x00, 0x0012, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x08, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x75, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x14, 0x00, 0x0018, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x03 }, 0xFE40, 0xF800, { 0x00, 0x00, 0x55, 0x00, 0x00, 0x00 }, },
    { 0x2054, 0x08, 0x00, 0x00FF, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xE73E, 0xE73E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x04FC, 0x40, 0x00, 0x007F, { 0x00, 0x00, 0x00, 0x00, 0x01, 0x1F, 0x01, 0x06 }, 0xCE7E, 0xF7BE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00A0, 0x40, 0x00, 0x007F, { 0x00, 0x00, 0x00, 0x00, 0x01, 0x1F, 0x01, 0x06 }, 0x003E, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x1E, 0x00, 0x005A, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x03, 0x06 }, 0x852F, 0x0021, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x04, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x06 }, 0xCE7E, 0xF7BE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0042, 0x14, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x0F, 0x03 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x30, 0x00, 0x00, 0x00 }, },
    { 0x0042, 0x28, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x0F, 0x03 }, 0xFFC0, 0x17C0, { 0x00, 0x00, 0x40, 0x00, 0x00, 0x00 }, },
    { 0x0042, 0x3C, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x0F, 0x03 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x50, 0x00, 0x00, 0x00 }, },
    { 0x005C, 0x04, 0x00, 0x0046, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0x94BF, 0x94BF, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x01, 0x00, 0x005A, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x01, 0x06 }, 0x7BFF, 0x7BFF, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0013, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x04, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x14, 0x00, 0x000E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x08, 0x00, 0x000A, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x04 }, 0xCE72, 0x0000, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x001E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x009C, 0x04, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x06 }, 0xCE7E, 0xF7BE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0026, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x04, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0016, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x04, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x047C, 0x40, 0x00, 0x007F, { 0x00, 0x00, 0x00, 0x00, 0x01, 0x1F, 0x01, 0x06 }, 0xCE7E, 0xAD7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0044, 0x10, 0x00, 0x00F0, { 0x01, 0x00, 0x00, 0x00, 0x00, 0x08, 0x03, 0x00 }, 0xBDFE, 0xDEFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0007, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x04, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x14, 0x00, 0x000C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x04 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x14, 0x00, 0x000C, { 0x01, 0x00, 0x00, 0x00, 0x00, 0x02, 0x06, 0x04 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D2, 0x14, 0x00, 0x0012, { 0x01, 0x00, 0x00, 0x00, 0x00, 0x03, 0x06, 0x04 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005A, 0x02, 0x00, 0x001F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x02 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005C, 0x04, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x205C, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01 }, 0xE73E, 0xE73E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005C, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005C, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xB5AC, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00C4, 0x1C, 0x00, 0x0028, { 0x01, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x24, 0x00, 0x00DC, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x23, 0x00, 0x003C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0084, 0x14, 0x00, 0x0080, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x14, 0x00, 0x00DC, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x01, 0x00, 0x005A, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x01, 0x06 }, 0x7BFF, 0x7BFF, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0084, 0x0C, 0x00, 0x0028, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFC0, 0xFFC0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0054, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x05, 0x04 }, 0xFFFE, 0xDE72, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x08, 0x00, 0x000B, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x04 }, 0xF800, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0014, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x02, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0014, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x02, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DA, 0x14, 0x00, 0x00DC, { 0x02, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x04, 0x02 }, 0xFFFE, 0x0B82, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x1E, 0x00, 0x002C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x02, 0x06 }, 0x852F, 0x0021, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x1E, 0x00, 0x0014, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x02, 0x06 }, 0x852F, 0x0021, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x01, 0x00, 0x0008, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x04 }, 0xFFFE, 0xB5BE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x007E, 0x1E, 0x00, 0x001F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x03, 0x04 }, 0x852F, 0x0021, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0C00, 0x04, 0x00, 0x04C4, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x02 }, 0xFFFE, 0x0000, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x105C, 0x08, 0x00, 0x00FA, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x06 }, 0xFFFE, 0xCE7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0C00, 0x14, 0x00, 0x04C4, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x06 }, 0xB5BE, 0x632C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x14, 0x00, 0x000C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x04, 0x06 }, 0xA53E, 0xCE7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0400, 0x14, 0x00, 0x04C4, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x10, 0x06 }, 0xB5BE, 0x632C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x001F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x001F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x14, 0x00, 0x0009, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x02, 0x06 }, 0xA53E, 0xCE7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x14, 0x00, 0x000B, { 0x01, 0x00, 0x00, 0x00, 0x00, 0x02, 0x06, 0x04 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x1E, 0x00, 0x001D, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x01, 0x06 }, 0x0001, 0x0001, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x001F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x0C, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x02 }, 0xFFFE, 0x6318, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x0C, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x02 }, 0xFFFE, 0x6318, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x32, 0x00, 0x0040, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x07, 0x03 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x004E, 0x32, 0x00, 0x0040, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x07, 0x03 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x1E, 0x00, 0x005A, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x01, 0x06 }, 0xF7BF, 0xCE7F, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DE, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x04, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x005E, 0x10, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x02 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x0001, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x07 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0500, 0x58, 0x00, 0x0009, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x04 }, 0xA53E, 0xCE7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x10, 0x00, 0x0014, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x03, 0x06 }, 0x000E, 0x000E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x1414, 0x08, 0x00, 0x07D0, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x08, 0x00, 0x0006, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x0001, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x0020, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0054, 0x08, 0x00, 0x0009, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0054, 0x08, 0x00, 0x0009, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0054, 0x08, 0x00, 0x001D, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x04, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x10, 0x00, 0x001D, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x01, 0x05 }, 0xFFFE, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0003, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0005, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0006, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0007, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x08, 0x00, 0x0008, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x1E, 0x00, 0x002C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x02, 0x06 }, 0x852F, 0x0021, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x1402, 0x20, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x08, 0x05 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x1402, 0x20, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x08, 0x05 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x08, 0x00, 0x001E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x205C, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01 }, 0xE73E, 0xE73E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x10, 0x00, 0x0013, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x20, 0x00, 0x0027, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x05, 0x05 }, 0xD6B4, 0x5AD6, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x1E, 0x00, 0x0014, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x02, 0x05 }, 0xFFC1, 0xFDC9, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x001C, 0x0C, 0x00, 0x003C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0046, 0x10, 0x00, 0x0017, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x04, 0x00 }, 0x7BFE, 0xA53E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x205C, 0x08, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00 }, 0xE73E, 0xE73E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0000, 0x10, 0x00, 0x0010, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x01 }, 0xF800, 0x3000, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x20, 0x00, 0x00C8, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x05, 0x05 }, 0xFF80, 0xF800, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x10, 0x00, 0x0013, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x20, 0x00, 0x0031, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x05, 0x05 }, 0x9CE6, 0x318C, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00D6, 0x10, 0x00, 0x0013, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x03, 0x05 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x20, 0x00, 0x0027, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x05, 0x05 }, 0xD6B4, 0x5AD6, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0006, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0056, 0x10, 0x00, 0x0007, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x03, 0x04 }, 0x28C4, 0x8C1E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x00DC, 0x08, 0x00, 0x0008, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04 }, 0xFFFE, 0xFFFE, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0002, 0x14, 0x00, 0x0009, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x06 }, 0xA53E, 0xCE7E, { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }, },
    { 0x0200, 0x00, 0x00, 0x0000, { 0x02, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x01, 0x00 }, 0xFE00, 0x0000, { 0x01, 0x00, 0xFE, 0x00, 0x00, 0x00 },  },
    { 0x0000, 0xFE, 0x00, 0x0000, { 0xFF, 0x00, 0xFE, 0x00, 0x00, 0x00, 0xFF, 0x00 }, 0xFF00, 0x0000, { 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00 },  },
    { 0xFE00, 0x01, 0x00, 0x0000, { 0xFE, 0x00, 0x01, 0x00, 0x00, 0x00, 0xFE, 0x00 }, 0x0200, 0x0000, { 0xFF, 0x00, 0x02, 0x00, 0x00, 0x00 },  },
    { 0x0000, 0x02, 0x00, 0x0000, { 0x01, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00 }, 0x0100, 0x0000, { 0x02, 0x00, 0x00, 0x00, 0x00, 0x00 },  },
    { 0x0200, 0x00, 0x00, 0x0000, { 0x02, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x01, 0x00 }, 0xFE00, 0x0000, { 0x01, 0x00, 0xFE, 0x00, 0x00, 0x00 },  },
    { 0x0000, 0xFE, 0x00, 0x0000, { 0xFF, 0x00, 0xFE, 0x00, 0x00, 0x00, 0xFF, 0x00 }, 0xFF00, 0x0000, { 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00 },  },
    { 0xFE00, 0x01, 0x00, 0x0000, { 0xFE, 0x00, 0x01, 0x00, 0x00, 0x00, 0xFE, 0x00 }, 0x0200, 0x0000, { 0xFF, 0x00, 0x02, 0x00, 0x00, 0x00 },  },
    { 0x0000, 0x02, 0x00, 0x0000, { 0x01, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00 }, 0x0100, 0x0000, { 0x02, 0x00, 0x00, 0x00, 0x00, 0x00 },  },
    { 0x0032, 0x00, 0x32, 0x0032, { 0x00, 0x5A, 0x00, 0x5A, 0x00, 0x8C, 0x00, 0x8C }, 0x008C, 0x00DC, { 0x00, 0xB4, 0x00, 0xB4, 0x01, 0x04 },  },
    { 0x00DC, 0x00, 0xDC, 0x0168, { 0x00, 0xDC, 0x00, 0xDC, 0x01, 0x7C, 0x01, 0x04 }, 0x0104, 0x0104, { 0x01, 0x2C, 0x01, 0x2C, 0x00, 0x50 },  },
    { 0x012C, 0x01, 0x2C, 0x0000, { 0x01, 0x04, 0x01, 0x04, 0xFF, 0xB0, 0x00, 0xDC }, 0x00DC, 0xFF60, { 0x00, 0xDC, 0x00, 0xDC, 0xFF, 0x2E },  },
    { 0x00B4, 0x00, 0xB4, 0xFF6A, { 0x00, 0x8C, 0x00, 0x8C, 0xFF, 0x92, 0x00, 0x5A }, 0x005A, 0xFFA6, { 0x00, 0x32, 0x00, 0x32, 0xFF, 0xD3 },  },
    { 0xFFCE, 0xFF, 0xCE, 0x0032, { 0xFF, 0xA6, 0xFF, 0xA6, 0x00, 0x8C, 0xFF, 0x74 }, 0xFF74, 0x00DC, { 0xFF, 0x4C, 0xFF, 0x4C, 0x01, 0x04 },  },
    { 0xFF24, 0xFF, 0x24, 0x0168, { 0xFF, 0x24, 0xFF, 0x24, 0x01, 0x7C, 0xFE, 0xFC }, 0xFEFC, 0x0104, { 0xFE, 0xD4, 0xFE, 0xD4, 0x00, 0x50 },  },
    { 0xFED4, 0xFE, 0xD4, 0x0000, { 0xFE, 0xFC, 0xFE, 0xFC, 0xFF, 0xB0, 0xFF, 0x24 }, 0xFF24, 0xFF60, { 0xFF, 0x24, 0xFF, 0x24, 0xFF, 0x2E },  },
    { 0xFF4C, 0xFF, 0x4C, 0xFF6A, { 0xFF, 0x74, 0xFF, 0x74, 0xFF, 0x92, 0xFF, 0xA6 }, 0xFFA6, 0xFFA6, { 0xFF, 0xCE, 0xFF, 0xCE, 0xFF, 0xD3 },  },
};

s32 unkfoo[] = {
    0x00000000, 0x00000000, 0x00000000, 0x006E0000
};

#endif

extern u8  D_803B74D0_7C8B80[];


// ========================================================
// .bss
// ========================================================

struct084 D_803D6120; // size 0x3FD8

s32 D_803DA0FC; // could be static?
s32 D_803DA100; // could be static?
s32 D_803DA104; // could be static?
s32 D_803DA108; // could be static?

// ========================================================
// .text
// ========================================================

// zero out particle data?
// ESA: func_800A3C98
void reset_particles(void) {
    D_803D6120.used = 0;
    memset_bytes((u8*)&D_803D6120, 0, sizeof(D_803D6120));
    D_803D6120.unk3FD4 = 0; // ?
}

#if 0

// CURRENT (46949)

typedef struct {
  s16 unk0;
  s16 unk2;
  s16 unk4;
} tmp;
// could be a struct size 0x6?
extern tmp D_803A2C00_7B42B0[32];

void func_8032F170_740820(Gfx **arg0, s32 x, s32 z, s32 y, s16 arg4, s16 arg5, s32 arg6, s32 arg7, u8 arg8, s16 arg9);

void func_802CB394_6DCA44(s32 arg0) {
    s32 pad2[2];
    s16 sp806;
    s32 pad[3];
    u16 sp7E2;
    u8  sp7DD;
    s16 sp7DA;

    struct036 *var_s1;
    Gfx **dl;

    s16 var_s0;
    s16 var_s2;
    s16 temp_a0_4;

    u16 temp_fp;

    u16 temp_t4_48;

    u16 k;
    u8  i;
    u16 j;
    u8 lodFraction;

    struct099 *particle;
    u16 flags;
    u16 colorPriRGBA5551;
    u16 colorEnvRGBA5551;

    s16 temp_t0; // tbd
    s16 var_s4;

    s32 sp7C0;
    s16 sp7B0[8];

    s32 temp_v0_88;
    s32 temp_v1_36;

    sp806 = 0;
    func_8012826C();

    for (i = 0; i < 8; i++) {
        sp7B0[i] = 0;
    }

    var_s1 = &D_803D6120.particles; // D_803D6128

    for (j = 0; j < 8; j++) {
        D_803D6120.unk3FC8[j] = 0;
    }

    gSPDisplayList(D_801D9E98[0]++, D_01004680_3DF50);
    gSPDisplayList(D_801D9E98[0]++, D_01004828_3E0F8);
    gSPDisplayList(D_801D9E98[0]++, D_010047D0_3E0A0);

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[0]++,
    /* timg   */  D_0102C210_65AE0,
    /* tmem   */  0,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[0]++,
    /* timg   */  D_0102CA10_662E0,
    /* tmem   */  0x0100,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    gSPDisplayList(D_801D9E98[2]++, D_01004680_3DF50);
    gSPDisplayList(D_801D9E98[2]++, D_01004828_3E0F8);
    gSPDisplayList(D_801D9E98[2]++, D_01004720_3DFF0);

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[2]++,
    /* timg   */  D_010226D0_5BFA0,
    /* tmem   */  0,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[2]++,
    /* timg   */  D_01022ED0_5C7A0,
    /* tmem   */  0x0100,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    gSPDisplayList(D_801D9E98[6]++, D_010047D0_3E0A0);

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[6]++,
    /* timg   */  D_01020DB0_5A680,
    /* tmem   */  0,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[6]++,
    /* timg   */  D_010215B0_5AE80,
    /* tmem   */  0x0100,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    gSPDisplayList(D_801D9E98[3]++, D_01003A58_3D328);
    gSPDisplayList(D_801D9E98[3]++, D_010047D0_3E0A0);

    gSPDisplayList(D_801D9E98[4]++, D_01004828_3E0F8);
    gSPDisplayList(D_801D9E98[4]++, D_010047D0_3E0A0);

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[4]++,
    /* timg   */  D_01023550_5CE20,
    /* tmem   */  0,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[4]++,
    /* timg   */  D_01023D50_5D620,
    /* tmem   */  0x0100,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    gSPDisplayList(D_801D9E98[5]++, D_010047D0_3E0A0);

    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[5]++,
    /* timg   */  D_01028D50_62620,
    /* tmem   */  0,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );


    _gDPLoadTextureBlock_4b(
    /* pkt    */  D_801D9E98[5]++,
    /* timg   */  D_01029550_62E20,
    /* tmem   */  0x0100,
    /* fmt    */  G_IM_FMT_I,
    /* width  */  16,
    /* height */  256,
    /* pal    */  0,
    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
    /* masks  */  G_TX_NOMASK,
    /* maskt  */  G_TX_NOMASK,
    /* shifts */  G_TX_NOLOD,
    /* shiftt */  G_TX_NOLOD
    );

    if (1) {};

    gSPDisplayList(D_801D9E98[7]++, D_01004828_3E0F8);

    gSPDisplayList(D_801D9E98[1]++, D_01003A58_3D328);
    gSPDisplayList(D_801D9E98[1]++, D_010047D0_3E0A0);

    gDPSetTextureImage(D_801D9E98[1]++, G_IM_FMT_I, G_IM_SIZ_16b, 1, OS_K0_TO_PHYSICAL(D_0102A210));
    gDPSetTile(D_801D9E98[1]++, G_IM_FMT_I, G_IM_SIZ_16b, 0, 0x0000, G_TX_LOADTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
    gDPLoadSync(D_801D9E98[1]++);
    gDPLoadBlock(D_801D9E98[1]++, G_TX_LOADTILE, 0, 0, 2047, 512);
    gDPPipeSync(D_801D9E98[1]++);
    gDPSetTile(D_801D9E98[1]++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
    gDPSetTileSize(D_801D9E98[1]++, G_TX_RENDERTILE, 0, 0, 4*(31), 4*(127));

// while (sp7E2 < 0xFF);
    for (sp7E2 = 0; sp7E2 < 0xFF; sp7E2++) {
    // do {
        if (var_s1->unk36 != 0) {
            var_s1->unk36--; // = (s16) (var_s1->unk36 - 1);
        } else if (var_s1->unk18 != 0) {
            particle = &D_803A20C0_7B3770[var_s1->id];
            sp7DD = particle->unkD; //>pad6[7];
            flags = particle->unk0;
            sp7DA = particle->unkB; // pad6[5];

            D_803D6120.unk3FC8[sp7DD] = 1;
            if (var_s1->unk1A == 0) {
                var_s1->unk18--;
            }

            // doesnt seem to be a switch
            if (particle->unk6 != 0) {
                if (particle->unk6 == 2) {
                    var_s1->unk0  += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + (((var_s1->unk18 + sp7E2) & 0x3F) >> 1)].unk0 << 8;
                    var_s1->unk8  += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + (((var_s1->unk18 + sp7E2) & 0x3F) >> 1)].unk2 << 8;
                    var_s1->unk10 += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + (((var_s1->unk18 + sp7E2) & 0x3F) >> 1)].unk4 << 8;
                } else {
                    // article->unk6 == 1 ?
                    var_s1->unk0  += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + ((var_s1->unk18 + sp7E2) & 0x1F)].unk0 << 8;
                    var_s1->unk8  += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + ((var_s1->unk18 + sp7E2) & 0x1F)].unk2 << 8;
                    var_s1->unk10 += D_803A2C00_7B42B0[((particle->unk6 - 1) * 32) + ((var_s1->unk18 + sp7E2) & 0x1F)].unk4 << 8;
                }
            }

            // TBD
            var_s4 = 0;
            if (flags & 2) {
                if (sp7DA == ((var_s1->unk18 % sp7DA) + 1)) {
                    var_s1->unk2D++; // = (u8) (var_s1->unk2D + 1);
                }
                // temp_v0_53 = particle->unkC;
                // if ((s32) temp_v0_53 < (s32) var_s4) {
                //     var_s4 = (u8) (s16) temp_v0_53;
                // } else {
                //   var_s4 = var_s1->unk2D;
                // }
                var_s4 = MAX(particle->unkC, var_s1->unk2D);
            }

            if (flags & 0x10) {
                if (flags & 8) {
                    if (var_s1->unk28 > FTOFIX32(-12.0)) {
                        var_s1->unk28 -= FTOFIX32(0.3814697265625); // 12500 / 32768
                    }
                }

                if (flags & 0x40) {
                    if (var_s1->unk20 > 0) {
                        var_s1->unk20 -= FTOFIX32(0.08447265625); // FTOFIX32(0.08447265625) -> 173/2048
                    }
                    if (var_s1->unk20 < 0) {
                        var_s1->unk20 += FTOFIX32(0.08447265625); // FTOFIX32(0.08447265625) -> 173/2048
                    }
                    if (var_s1->unk24 > 0) {
                        var_s1->unk24 -= FTOFIX32(0.08447265625); // FTOFIX32(0.08447265625) -> 173/2048
                    }
                    if (var_s1->unk24 < 0) {
                        var_s1->unk24 += FTOFIX32(0.08447265625); // FTOFIX32(0.08447265625) -> 173/2048
                    }
                }
                // something about the floor level
                sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);

                // something about the water level
                var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);

                if ((var_s1->id == 0x23) || (var_s1->id == 0x6D)) {
                    if ((var_s1->id == 0x6D) && (var_s1->unk28 < FTOFIX32(-4.0))) {
                        var_s1->unk28 = FTOFIX32(-4.0);
                    }
                    if ((s32)(var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->id = 0x6D;
                        sp7DD = 0;
                    } else {
                        var_s1->id = 0x23;
                        sp7DD = 1;
                    }
                }
                if (flags & 0x2000) {
                    var_s2 = 0;
                }

// #if 0
//                 temp_ret_3 = __ll_rshift(var_s1->unk10, var_s1->unk14, 0, 0x10);
//                 temp_v0_55 = temp_ret_3;
//                 temp_t6_5 = var_s2 >> 0x1F;
//                 if ((temp_v0_55 < temp_t6_5) || ((temp_t6_5 >= temp_v0_55) && ((u32) (u64) temp_ret_3 < (u32) var_s2)) || (temp_ret_4 = __ll_rshift(var_s1->unk10, var_s1->unk14, 0, 0x10), temp_v0_56 = temp_ret_4, temp_t6_6 = sp7C0 >> 0x1F, ((temp_v0_56 < temp_t6_6) != 0)) || ((temp_t6_6 >= temp_v0_56) && ((u32) (u64) temp_ret_4 < (u32) sp7C0)) || ((temp_ret_5 = __ll_rshift(var_s1->unk0, var_s1->unk4, 0, 0x10), spC8 = temp_ret_5, spCC = (u32) (u64) temp_ret_5, temp_v0_57 = func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10), temp_t6_7 = var_s1->unk10, temp_t8_6 = temp_v0_57 >> 0x1F, ((temp_t8_6 < temp_t6_7) == 0)) && ((temp_t6_7 < temp_t8_6) || ((u32) var_s1->unk14 < (u32) temp_v0_57)) && (var_s1->unk38 & 1))) {
//
// #endif
                if (((var_s1->unk10 >> 0x10) < var_s2) || ((var_s1->unk10 >> 0x10) < sp7C0) ||
                    ((func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10) > (var_s1->unk10)) && (var_s1->unk38 & 1))) {

                    if (flags & 0x80) {
                        var_s1->unk18 = 0;
                        if ((flags & 0x20) && (var_s1->unk34 != 0)) {

                            if (D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk6 < (D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk0 * 2)) {
                                D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk6 = D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk0 * 2;
                            }

                            D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk6 += var_s1->unk34;

                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                (var_s1->unk10 >> 0x10) + 20,
                                0x15,
                                0x1E,
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                0);
                        }
                    } else if ((flags & 0x20) == 0) {
                        var_s1->unk28 = -(var_s1->unk28 / 2);
                        var_s1->size = (var_s1->size >> 1);
                        if (var_s1->unk28 < FTOFIX32(0.48828125)) { // --> 1000 / 2048
                            var_s1->unk18 = 0;
                        }
                    }
                }
                if (flags & 4) {
                    var_s1->unk10 += var_s1->unk28;

                    var_s1->unk0 += var_s1->unk20;
                    var_s1->unk8 += var_s1->unk24;

                }
            }

            colorPriRGBA5551 = var_s1->primaryColor;
            colorEnvRGBA5551 = var_s1->envColor;
            temp_fp = var_s1->size; // & 0xFFFF;

            dl = &D_801D9E98[sp7DD];

            lodFraction = ((0x100 / sp7DA) * ((sp7DA - (var_s1->unk18 % sp7DA)) - 1));

            // this needs some finesse, >> 8 is /8 which is the size of a Gfx command
            if (((s32) (((s32)*dl - (s32)D_8020428C) + -((sp7DD + 6) * 0x2BC0) - 2048) >> 3) < 1390) {

                switch (var_s1->id) {
                case 0x0:
                case 0x1:
                case 0x2:
                    if (var_s4 < particle->unkC) {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01024550_5DE20[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  64,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0040, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    } else {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01024550_5DE20[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  32,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    }

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0x37);

                    func_8032F170_740820(
                        dl,
                        var_s1->unk0,
                        var_s1->unk8,
                        var_s1->unk10,
                        0x1F,
                        0x1F,
                        temp_fp << 8,
                        temp_fp << 8,
                        0,
                        0);
                    break;
                case 0x3:
                case 0x4:
                case 0x5:
                    if ((var_s1->id == 2) && (SSSV_RAND(16) == 1)) {
                        create_particle_effect_2(
                            (var_s1->unk0 >> 0x10) + SSSV_RAND(64) - 0x20,
                            var_s1->unk8 >> 0x10,
                            (var_s1->unk10 >> 0x10) - (SSSV_RAND(64) + 0x20),
                            0x15,
                            0xF,
                            0,
                            0,
                            0);
                    }

                    if (var_s4 < particle->unkC) {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01025750_5F020[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  64,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0040, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    } else {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01025750_5F020[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  32,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    }

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0x37);

                    func_8032F170_740820(
                        dl,
                        var_s1->unk0,
                        var_s1->unk8,
                        var_s1->unk10,
                        0x1F,
                        0x1F,
                        temp_fp << 8,
                        temp_fp << 8,
                        0,
                        0);
                    break;
                case 0x6:
                case 0x7:
                case 0x8:
                    if ((var_s1->id == 2) && (SSSV_RAND(16) == 1)) {
                        create_particle_effect_2(
                            (var_s1->unk0 >> 0x10) + SSSV_RAND(64) - 0x20,
                            var_s1->unk8 >> 0x10,
                            (var_s1->unk10 >> 0x10) - (SSSV_RAND(64) + 0x20),
                            0x15,
                            0xF,
                            0,
                            0,
                            0);
                    }
                    if (var_s4 < particle->unkC) {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01026950_60220[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  64,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0040, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    } else {
                        gDPLoadTextureBlock2(
                        /* pkt    */  (*dl)++,
                        /* timg   */  &D_01026950_60220[var_s4 << 9],
                        /* fmt    */  G_IM_FMT_I,
                        /* line,  */  2,
                        /* siz,   */  G_IM_SIZ_16b,
                        /* width  */  32,
                        /* height */  32,
                        /* pal    */  0,
                        /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                        /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                        /* masks  */  G_TX_NOMASK,
                        /* maskt  */  G_TX_NOMASK,
                        /* shifts */  5,
                        /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    }

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0x37);

                    func_8032F170_740820(
                        dl,
                        var_s1->unk0,
                        var_s1->unk8,
                        var_s1->unk10,
                        0x1F,
                        0x1F,
                        temp_fp << 8,
                        temp_fp << 8,
                        0,
                        0);
                    break;
                case 0x9:
                    if (var_s4 < particle->unkC) {
                        gDPLoadTextureBlock2(
                          /* pkt    */  (*dl)++,
                          /* timg   */  &D_01027B50_61420[var_s4 << 9],
                          /* fmt    */  G_IM_FMT_I,
                          /* line,  */  2,
                          /* siz,   */  G_IM_SIZ_16b,
                          /* width  */  32,
                          /* height */  64,
                          /* pal    */  0,
                          /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                          /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                          /* masks  */  G_TX_NOMASK,
                          /* maskt  */  G_TX_NOMASK,
                          /* shifts */  5,
                          /* shiftt */  G_TX_NOLOD
                        );

                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0040, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    } else {
                        gDPLoadTextureBlock2(
                          /* pkt    */  (*dl)++,
                          /* timg   */  &D_01027B50_61420[var_s4 << 9],
                          /* fmt    */  G_IM_FMT_I,
                          /* line,  */  2,
                          /* siz,   */  G_IM_SIZ_16b,
                          /* width  */  32,
                          /* height */  32,
                          /* pal    */  0,
                          /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                          /* cmt    */  G_TX_MIRROR | G_TX_WRAP,
                          /* masks  */  G_TX_NOMASK,
                          /* maskt  */  G_TX_NOMASK,
                          /* shifts */  5,
                          /* shiftt */  G_TX_NOLOD
                        );
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 2, 0x0000, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, 5, G_TX_NOLOD);
                    }

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(
                        dl,
                        var_s1->unk0,
                        var_s1->unk8,
                        var_s1->unk10,
                        0x1F,
                        0x1F,
                        temp_fp << 8,
                        temp_fp << 8,
                        0,
                        0);
                    break;
                case 0xA:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, /*tmem?*/ (var_s4 * 0x10) + 0x90, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0xFF - var_s1->unk18, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);
                    var_s1->unk18 = (s16) ((var_s1->unk18 - var_s1->unk34) + 1);
                    if (var_s1->unk18 < 0) {
                        var_s1->unk18 = 0;
                    }
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0xB:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x00C0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0xC:
                    if ((var_s1->unk10 >> 0x10) > (D_803C0740[((((var_s1->unk0) >> 0x10) + 0x40) >> 6)][(var_s1->unk8 >> 0x10) >> 6].unk6 * 4)) {
                        var_s1->unk18 = 0;
                    }
                    if (var_s4 >= 2) {
                        var_s4 = 0;
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, /* tmem */ (var_s4 * 0x10) + 0xA0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, /* tmem */ (var_s4 * 0x10) + 0xA0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    var_s1->unk10 += ((var_s1->size >> 3) + 1) << 0x10;

                    break;
                case 0xD:
                    var_s1->unk10 = func_80298818_6A9EC8(var_s1->unk0>> 0x10, var_s1->unk8 >> 0x10) << 0x10;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x00A0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->unk0 += var_s1->unk20;
                    var_s1->unk8 += var_s1->unk24;

                    func_8032F170_740820(
                        dl,
                        var_s1->unk0,
                        var_s1->unk8,
                        var_s1->unk10,
                        0xF,
                        0xF,
                        temp_fp << 8,
                        (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8,
                        0,
                        0);
                    break;
                case 0xE:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        if (SSSV_RAND(2) == 1) {
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                var_s1->unk10 >> 0x10,
                                0x13,
                                8,
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                0);
                        }
                    } else {
                        sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                        if (((var_s1->unk10 >> 0x10) + 0x12) < sp7C0) {
                            var_s1->unk18 = 0;
                        } else {
                            if ((var_s1->unk10 < func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10)) && (var_s1->unk38 & 1)) {
                                var_s1->unk18 = 0;
                            }
                        }
                    }
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x00C0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->unk28 -= 0x7FF8; //= (s32) (var_s1->unk28 - 0x7FF8);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 9, 0, 0);
                    break;
                case 0x12:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        if (SSSV_RAND(2) == 1) {
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                var_s1->unk10 >> 0x10,
                                0x13,
                                1,
                                GPACK_RGBA5551((D_803E1BBA + 0x1FF) / 3, (D_803E1BBB + 0x1FF) / 3, (D_803E1BBC + 0x1FF) / 3, 1),
                                GPACK_RGBA5551((D_803E1BBA + 0x1FF) / 3, (D_803E1BBB + 0x1FF) / 3, (D_803E1BBC + 0x1FF) / 3, 1),
                                0);
                        }
                    } else {
                        if (((var_s1->unk10 >> 0x10) + 0x12) < (((D_803C0740[((var_s1->unk0 >> 0x10) >> 6) + 0][((var_s1->unk8 >> 0x10) >> 6) + 0].unk0 + D_803C0740[((var_s1->unk0 >> 0x10) >> 6) + 1][((var_s1->unk8 >> 0x10) >> 6) + 1].unk0) >> 1) * 8)) {
                            var_s1->unk18 = 0;
                        } else {
                            if ((var_s1->unk10 < func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10)) && (var_s1->unk38 & 1)) {
                                var_s1->unk18 = 0;
                                create_particle_effect_2(
                                    var_s1->unk0 >> 0x10,
                                    var_s1->unk8 >> 0x10,
                                    sp7C0 + 8,
                                    0x3A,
                                    8,
                                    GPACK_RGBA5551(((s32) (D_803E1BBA + 0x1FF) / 3), ((s32) (D_803E1BBB + 0x1FF) / 3), ((s32) (D_803E1BBC + 0x1FF) / 3), 1),
                                    GPACK_RGBA5551(((s32) (D_803E1BBA + 0x1FF) / 3), ((s32) (D_803E1BBB + 0x1FF) / 3), ((s32) (D_803E1BBC + 0x1FF) / 3), 1),
                                    0);
                            }
                        }
                    }
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x01A0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x13:
                    var_s1->unk10 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10) << 0x10;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0110, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0120, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, (var_s1->size * 6), colorPriRGBA5551, 0xFF);

                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->size += 2;
                    if (var_s1->size >= 0x29) {
                        var_s1->unk18 = 0;
                    }

                    var_s1->unk20 = (((((D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk7 & 0xF0) >> 4) & 7) * (1 - (((D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk7 >> 4) & 8) >> 2))) << 0x10);

                    // help
                    var_s1->unk24 = (((D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk7 & 7) * (1 - ((D_803C0740[(var_s1->unk0 >> 0x10) >> 6][(var_s1->unk8 >> 0x10) >> 6].unk7 & 8) >> 2))) << 0x10);

                    var_s1->unk0 += var_s1->unk20;
                    var_s1->unk8 += var_s1->unk24;

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, (temp_fp << 8), (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8, 0, 0);
                    break;

                case 0x14:
                case 0x1D:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (((var_s4 * 0x10) + 0xB0)), G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (((var_s4 * 0x10) + 0xC0)), 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x15:
                case 0x16:
                case 0x17:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x10) * 0x10, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x11) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x18:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        create_particle_effect_2(
                            var_s1->unk0 >> 0x10,
                            var_s1->unk8 >> 0x10,
                            var_s1->unk10 >> 0x10,
                            0x13,
                            8,
                            GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                            GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                            0);
                    } else {
                        sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                        if (((var_s1->unk10 >> 0x10) + 0x12) < sp7C0) {
                            var_s1->unk18 = 0;
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                sp7C0 + 8,
                                0x3A,
                                0x12,
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                GPACK_RGBA5551(D_803E1BBD, D_803E1BBE, D_803E1BBF, 1),
                                0);
                        } else {
                            if ((var_s1->unk10 < func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10)) && (var_s1->unk38 & 1)) {
                                var_s1->unk18 = 0;
                                create_particle_effect_2(
                                    var_s1->unk0 >> 0x10,
                                    var_s1->unk8 >> 0x10,
                                    sp7C0 + 8,
                                    0x3A,
                                    0x12,
                                    GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                    GPACK_RGBA5551(D_803E1BBD, D_803E1BBE, D_803E1BBF, 1),
                                    0);
                            }
                        }
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0170, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x19:
                case 0x1A:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xB0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xC0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    if (var_s1->size < var_s1->unk34) {
                        var_s1->size += SSSV_RAND(8) + 3;
                    }

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x1B:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0170, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x1C:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if (var_s2 < (var_s1->unk10 >> 0x10)) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        create_particle_effect_2(
                            var_s1->unk0 >> 0x10,
                            var_s1->unk8 >> 0x10,
                            var_s1->unk10 >> 0x10,
                            0x13,
                            1,
                            GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                            GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                            0);
                    }
                    if (var_s4 >= 3) {
                        var_s4 = 0;
                    }
                    if ((gCameras[gCameraId].unk7C - 12.0f) < (f32) var_s2) {
                        gDPSetTile(D_801D9E98[6]++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xC0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                        gDPSetTile(D_801D9E98[6]++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xD0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                        gDPSetPrimColorRGBA5551CustomAlpha(D_801D9E98[6]++, 0, lodFraction, colorPriRGBA5551, 0xB4);
                        gDPSetEnvColorRGBA5551CustomAlpha(D_801D9E98[6]++, colorEnvRGBA5551, 0xB4);

                        func_8032F170_740820(&D_801D9EB0, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                        D_803D6120.unk3FC8[6] = 1;
                    } else {
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x60, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                        gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x70, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                        gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xB4);
                        gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xB4);

                        func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    }

                    var_s1->unk0 += var_s1->unk20;
                    var_s1->unk8 += var_s1->unk24;
                    var_s1->unk10 += (((s16) var_s1->size >> 3) + 2) << 0x10;
                    break;
                case 0x1E:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x140, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 9, 0, 0);
                    /* fallthrough */
                case 0x1F:
                case 0x20:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x140, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    var_s1->size += SSSV_RAND(2) + 1;
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 9, 0, 0);
                    break;

                case 0x22:
                    // *temp_s0 = temp_t0_3 + 8;
                    // temp_t0_3->words.w0 = 0xF5800200;
                    // temp_t0_3->words.w1 = 0;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    // temp_t0_124 = *temp_s0;
                    // *temp_s0 = temp_t0_124 + 8;
                    // temp_t0_124->words.w0 = 0xFA000000;
                    // sp3C4 = temp_t0_124;
                    // temp_s2_7 = func_8012826C() & 0xFFFF;
                    // sp96 = func_8012826C();
                    // sp3C4->words.w1 = (((255 * SSSV_RAND(2)) & 0xFF) << 8) | ((sp96 & 1) * 0xFF000000) | ((((temp_s2_7 & 1) * 0xFF) & 0xFF) << 0x10) | 0xC8;
                    gDPSetPrimColor((*dl)++, 0, 0, 255 * SSSV_RAND(2), 255 * SSSV_RAND(2), 255 * SSSV_RAND(2), 0xC8);

                    // temp_t0_125 = *temp_s0;
                    // *temp_s0 = temp_t0_125 + 8;
                    // temp_t0_125->words.w0 = 0xFB000000;
                    // sp3C0 = temp_t0_125;
                    // temp_s2_8 = func_8012826C() & 0xFFFF;
                    // temp_s3 = func_8012826C() & 0xFFFF;
                    // sp3C0->words.w1 = (((255 * SSSV_RAND(2)) & 0xFF) << 8) | ((temp_s3 & 1) * 0xFF000000) | ((((temp_s2_8 & 1) * 0xFF) & 0xFF) << 0x10);
                    gDPSetEnvColor((*dl)++, 255 * SSSV_RAND(2), 255 * SSSV_RAND(2), 255 * SSSV_RAND(2), 0);
                    break;
                case 0x23:
                case 0x62:
                case 0x67:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0x19);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0x19);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0x1F, 0x1F, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x24:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0020, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x25:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x26:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0010, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);

                    if ((var_s1->size >= 5) && (D_80151424 == 1)) {
                          var_s1->size--;
                    }

                    var_s1->unk10 += ((var_s1->size >> 3) + 1) << 0x10;
                    break;

                case 0x28:
                    if (SSSV_RAND(4) == 0) {
                        create_particle_effect_2(
                            var_s1->unk0 >> 0x10,
                            var_s1->unk8 >> 0x10,
                            var_s1->unk10 >> 0x10,
                            0x14,
                            var_s1->size,
                            0xCE73,
                            0x6319,
                            0);
                    }
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x29:
                    var_s1->size--;
                    if (var_s1->size < 4) {
                        var_s1->unk18 = 0;
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0020, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColor((*dl)++, 0, 0, (var_s1->unk18 * 2), (var_s1->unk18 * 2), (var_s1->unk18 * 2), 0xFF);
                    gDPSetEnvColor((*dl)++, 0x00, 0x00, 0x00, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x2A:
                    if (var_s1->unk18 & 8) {
                        var_s1->size--;
                        if (var_s1->size < 2) {
                            var_s1->unk18 = 0;
                        }
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0020, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x2B:
                    var_s1->unk10 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10) << 0x10;

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0110, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0120, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, (var_s1->size * 3), colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->size += 2;
                    if (var_s1->unk34 < var_s1->size) {
                        var_s1->unk18 = 0;
                    }
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, (s32) (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8, 0, 0);
                    break;

                case 0x2C:
                    temp_a0_4 = (var_s1->unk18 + 0x10) << 3;
                    temp_v1_36 = var_s1->unk18 << 4;

                    var_s1->unk0 += ((SIN(temp_v1_36) >> 6) - (SIN(temp_a0_4) >> 6)) << 9;
                    var_s1->unk8 += ((COS(temp_v1_36) >> 6) - (COS(temp_a0_4) >> 6)) << 9;
                    var_s1->unk10 += ((COS(var_s1->unk18 << 3) >> 6) - (COS((var_s1->unk18 + 0x1F) << 2) >> 6)) << 8;

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0020, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    func_8012826C(); // more randomness is apparently required?

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x2E:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x70, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x80, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x32:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x180, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x190, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);

                    var_s1->unk10 -= 0x8000;
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0U;
                    }
                    break;
                case 0x35:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0020, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->size += var_s1->unk34;

                    if (ABS(var_s1->unk34 * 4) < var_s1->size) {
                        var_s1->unk34 = -var_s1->unk34;
                    }
                    if (var_s1->size < 2) {
                        var_s1->unk18 = 0;
                    }

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x36:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {

                        var_s1->unk10 = var_s2 << 0x10;

                        var_s1->unk20 = 0;
                        var_s1->unk24 = 0;
                        var_s1->unk28 = 0;

                        if (SSSV_RAND(2) == 1) {
                            var_s1->unk18 = 0;

                            create_particle_effect(
                                (var_s1->unk0  >> 0x10),
                                (var_s1->unk8  >> 0x10),
                                (var_s1->unk10 >> 0x10) + 0x19,
                                0x16,
                                0,
                                0,
                                SSSV_RAND(32769) * 2,
                                (SSSV_RAND(32) + 0x28),
                                0xDEFF,
                                0xCE77,
                                0);
                        }
                    } else {

                        sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                        if (((var_s1->unk10 >> 0x10) + 0x12) < sp7C0) {
                            var_s1->unk20 = 0;
                            var_s1->unk24 = 0;
                            var_s1->unk28 = 0;
                            if (SSSV_RAND(2) == 1) {
                                var_s1->unk18 = 0;

                                create_particle_effect(
                                    var_s1->unk0 >> 0x10,
                                    var_s1->unk8 >> 0x10,
                                    (var_s1->unk10 >> 0x10) + 0x19,
                                    0x16,
                                    0,
                                    0,
                                    SSSV_RAND(32769) * 2,
                                    (SSSV_RAND(32) + 0x28),
                                    0xDEFF,
                                    0xCE77,
                                    0);
                            }
                        } else {

                            if (((var_s1->unk10) < func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10)) && (var_s1->unk38 & 1)) {
                                var_s1->unk20 = 0;
                                var_s1->unk24 = 0;
                                var_s1->unk28 = 0;
                                if (SSSV_RAND(2) == 1) {
                                    var_s1->unk18 = 0;

                                    create_particle_effect(
                                        var_s1->unk0 >> 0x10,
                                        var_s1->unk8 >> 0x10,
                                        (var_s1->unk10 >> 0x10) + 0x19,
                                        0x16,
                                        0,
                                        0,
                                        SSSV_RAND(32769) * 2,
                                        (SSSV_RAND(32) + 0x28),
                                        0xDEFF,
                                        0xCE77,
                                        0);
                                }
                            }
                        }
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xC0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xD0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);
                    if (var_s1->size < var_s1->unk34) {
                        var_s1->size += SSSV_RAND(8) + 3;
                    }

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x37:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        if (SSSV_RAND(2) == 1) {
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                var_s1->unk10 >> 0x10,
                                0x13,
                                1,
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                0);
                        }
                    } else {

                        if (((var_s1->unk10 >> 0x10) + 0x12) < (((s32) (D_803C0740[((var_s1->unk0 >> 0x10) >> 6) + 0][((var_s1->unk8 >> 0x10) >> 6) + 0].unk0 + D_803C0740[((var_s1->unk0 >> 0x10) >> 6) + 1][((var_s1->unk8 >> 0x10) >> 6) + 1].unk0) >> 1) * 8)) {
                            var_s1->unk18 = 0;
                        } else {
                            if (((var_s1->unk10) < func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10)) && (var_s1->unk38 & 1)) {
                                var_s1->unk18 = 0;
                            }
                        }
                    }
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0010, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 1, 8);

                    var_s1->unk10 -= 0x30000;

                    var_s1->unk0 += var_s1->unk20 * 2;
                    var_s1->unk8 += var_s1->unk24 * 2;
                    break;

                case 0x38:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;
                        if (SSSV_RAND(2) == 1) {
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                var_s1->unk10 >> 0x10,
                                0x13,
                                8,
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                0);

                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                (var_s1->unk10 + 0x19) >> 0x10, //(s32) (u32) (u64) __ll_rshift(var_s1->unk10 + (temp_a1_2 < 0x19U), temp_a1_2, 0, 0x10),
                                0x3A,
                                var_s1->size,
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                0);
                        }
                    } else {
                        sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);

                        if ((s16)(var_s1->unk10 >> 0x10) < ((s16)sp7C0 + 8)) {
                            var_s1->unk18 = 0;
                            create_particle_effect(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                sp7C0 + 0xE,
                                0x3A,
                                0,
                                0,
                                0,
                                (var_s1->size * 2),
                                colorPriRGBA5551,
                                colorEnvRGBA5551,
                                0);
                        } else {
                            sp7C0 = func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                            if (((var_s1->unk10) < sp7C0) && (var_s1->unk38 & 1)) {
                                var_s1->unk18 = 0;
                                create_particle_effect(
                                    var_s1->unk0 >> 0x10,
                                    var_s1->unk8 >> 0x10,
                                    (sp7C0 >> 0x10) + 8,
                                    0x3A,
                                    0,
                                    0,
                                    0,
                                    var_s1->size,
                                    GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                    GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                    0);
                            }
                        }
                    }
                    // temp_t0_166 = *temp_s0;
                    // *temp_s0 = temp_t0_166 + 8;
                    // temp_t0_166->words.w1 = 0;
                    // temp_t0_166->words.w0 = 0xF5800370;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0170, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    // temp_t0_167 = *temp_s0;
                    // *temp_s0 = temp_t0_167 + 8;
                    // temp_t0_167->words.w0 = 0xFA000000;
                    // temp_t0_167->words.w1 = (((s32) (colorPriRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorPriRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorPriRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    // temp_t0_168 = *temp_s0;
                    // *temp_s0 = temp_t0_168 + 8;
                    // temp_t0_168->words.w0 = 0xFB000000;
                    // temp_t0_168->words.w1 = (((s32) (colorEnvRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorEnvRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorEnvRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 1, 0);
                    break;

                case 0x39:
                case 0x3B:
                    var_s2 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);
                    if ((var_s1->unk10 >> 0x10) < var_s2) {
                        var_s1->unk18 = 0;
                        var_s1->unk10 = var_s2 << 0x10;

                        if (SSSV_RAND(2) == 1) {
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                var_s1->unk10 >> 0x10,
                                0x13,
                                8,
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                GPACK_RGBA5551(((D_803E1BBA + 0x1FF) / 3), ((D_803E1BBB + 0x1FF) / 3), ((D_803E1BBC + 0x1FF) / 3), 1),
                                0);

                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                ((var_s1->unk10 + 0x19) >> 0x10),
                                0x3A,
                                var_s1->size,
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                0);
                        }
                    } else {
                        sp7C0 = func_802D7434_6E8AE4(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);

                        if (((var_s1->unk10 >> 0x10) + 0x12) < sp7C0) {
                            var_s1->unk18 = 0;
                            create_particle_effect_2(
                                var_s1->unk0 >> 0x10,
                                var_s1->unk8 >> 0x10,
                                sp7C0 + 8,
                                0x3A,
                                var_s1->size,
                                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                GPACK_RGBA5551(D_803E1BBD, D_803E1BBE, D_803E1BBF, 1),
                                0);
                        } else {
                            if (var_s1->id == 0x39) {
                                sp7C0 = func_80310F58_722608(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10);

                                if ((var_s1->unk10 < sp7C0) && (var_s1->unk38 & 1)) {
                                    var_s1->unk18 = 0;
                                    create_particle_effect_2(
                                        var_s1->unk0 >> 0x10,
                                        var_s1->unk8 >> 0x10,
                                        (sp7C0 >> 0x10) + 8,
                                        0x3A,
                                        var_s1->size,
                                        GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                                        GPACK_RGBA5551(D_803E1BBD, D_803E1BBE, D_803E1BBF, 1),
                                        0);
                                }
                            }
                        }
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, (s32) ((D_803F2A9C + 4) * (temp_fp << 8)) >> 8, 1, 0);
                    var_s1->unk10 -= 0xE0000;
                    break;
                case 0x3A:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x3C:
                    if (var_s1->unk18 >= 9) {
                        lodFraction = 0;
                    } else {
                        lodFraction = (0xFF - (var_s1->unk18 << 5));
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0180, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    D_803DA0FC = (SIN(var_s1->unk34 << 2) >> 0xA) * SIN(var_s1->unk34 << 4);
                    D_803DA100 = (SIN(var_s1->unk34 << 2) >> 0xA) * COS(var_s1->unk34 << 4);
                    D_803DA104 = ((COS(var_s1->unk34 << 1) >> 0xA) * COS(var_s1->unk34 << 3)) + COS(var_s1->unk34 << 2);
                    D_803DA108 = SIN(((var_s1->unk34 << 2) + (sp7E2 << 6)) & 0x7F) >> 3;

                    var_s1->unk10 += 0x20000;
                    var_s1->unk34++;
                    func_8032F170_740820(dl, var_s1->unk0 + D_803DA0FC, var_s1->unk8 + D_803DA100, var_s1->unk10 + D_803DA104, 0x1F, 0x1F, D_803DA108, temp_fp << 8, 0, 0);
                    break;
                case 0x3D:
                    if (var_s1->unk18 >= 9) {
                        lodFraction = 0;
                    } else {
                        lodFraction = (0xFF - (var_s1->unk18 << 5));
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0080, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0180, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    D_803DA0FC = (COS(var_s1->unk34 << 3) >> 0xA) * COS(var_s1->unk34 << 4);
                    D_803DA100 = (SIN(var_s1->unk34 << 2) >> 0xA) * SIN((var_s1->unk34 & 0xF) << 3);
                    D_803DA104 = ((COS(var_s1->unk34 * 6) >> 0xA) * SIN(var_s1->unk34 << 3)) + COS(var_s1->unk34 << 2);
                    D_803DA108 = SIN(((var_s1->unk34 << 2) + (sp7E2 << 6)) & 0x7F) >> 3;

                    var_s1->unk10 += 0x20000;
                    var_s1->unk34++;
                    func_8032F170_740820(dl, var_s1->unk0 + D_803DA0FC, var_s1->unk8 + D_803DA100, var_s1->unk10 + D_803DA104, 0x1F, 0x1F, D_803DA108, temp_fp << 8, 0, 0);
                    break;

                case 0x3F:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x140, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x40:
                    var_s1->unk10 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10) << 0x10;

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x170, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x180, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    var_s1->unk0 += var_s1->unk20;
                    var_s1->unk8 += var_s1->unk24;

                    if (var_s1->size < var_s1->unk34) {
                        var_s1->size += SSSV_RAND(2) + 1;
                    }
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, (s32) (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8, 0, 0);
                    break;

                case 0x41:
                    lodFraction = (var_s1->unk34 << 3);

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0180, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);

                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);
                    D_803DA108 = SIN(((var_s1->unk34 << 2) + (sp7E2 << 6)) & 0x7F) >> 2;

                    var_s1->unk34++;
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0x1F, 0x1F, D_803DA108, D_803DA108, 0, 0);
                    break;

                case 0x46:
                    var_s1->unk10 = func_80298818_6A9EC8(var_s1->unk0 >> 0x10, var_s1->unk8 >> 0x10) << 0x10;

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x00F0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, (temp_fp << 8), (s32) (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8, 0, 0);
                    break;
                case 0x47:
                case 0x48:
                case 0x49:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x30, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x40, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0;
                    }
                    break;
                case 0x4A:
                case 0x4B:
                case 0x4C:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x90, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xA0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0U;
                    }
                    break;
                case 0x4D:
                case 0x4E:
                case 0x4F:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xE0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0xF0, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0;
                    }
                    break;
                case 0x50:
                case 0x51:
                case 0x52:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x140, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);

                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0;
                    }
                    break;
                case 0x53:
                    gDPLoadTextureBlock(
                    /* pkt    */  (*dl)++,
                    /* timg   */  &D_803B74D0_7C8B80[var_s1->unk34 << 0xB],
                    /* fmt    */  G_IM_FMT_RGBA,
                    /* siz    */  G_IM_SIZ_16b,
                    /* width  */  32,
                    /* height */  32,
                    /* pal    */  0,
                    /* cms    */  G_TX_NOMIRROR | G_TX_WRAP,
                    /* cmt    */  G_TX_NOMIRROR | G_TX_WRAP,
                    /* masks  */  5,
                    /* maskt  */  5,
                    /* shifts */  G_TX_NOLOD,
                    /* shiftt */  G_TX_NOLOD
                    );

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0x1F, 0x1F, temp_fp << 7, temp_fp << 7, 0, 0);
                    break;

                case 0x55:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x70, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x80, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0;
                    }
                    break;

                case 0x56:
                    // temp_t7_40 = var_s1->unk20;
                    // temp_t9_36 = var_s1->unk4;
                    // temp_ret_138 = __ll_rshift((var_s1->unk0 - (temp_t7_40 >> 0x1F)) - (temp_t9_36 < (u32) temp_t7_40), temp_t9_36 - temp_t7_40, 0, 0x10);
                    // spC0 = temp_ret_138;
                    // spC4 = (u32) (u64) temp_ret_138;
                    // temp_t7_41 = var_s1->unk24;
                    // temp_t9_37 = var_s1->unkC;
                    // temp_s3_2 = func_8012826C() & 0xFFFF;
                    // temp_ret_139 = __ll_rshift((var_s1->unk8 - (temp_t7_41 >> 0x1F)) - (temp_t9_37 < (u32) temp_t7_41), temp_t9_37 - temp_t7_41, 0, 0x10);
                    // spC8 = temp_ret_139;
                    // spCC = (u32) (u64) temp_ret_139;
                    // sp82 = func_8012826C();
                    // temp_t7_42 = var_s1->unk28;
                    // temp_t9_38 = var_s1->unk14;
                    // temp_ret_140 = __ll_rshift((var_s1->unk10 - (temp_t7_42 >> 0x1F)) - (temp_t9_38 < (u32) temp_t7_42), temp_t9_38 - temp_t7_42, 0, 0x10);
                    // spD0 = temp_ret_140;
                    // spD4 = (u32) (u64) temp_ret_140;
                    // temp_s2_18 = func_8012826C() & 0xFFFF;
                    // temp_t0_216 = var_s1->unk32;
                    create_particle_effect(
                        ((var_s1->unk0 - var_s1->unk20) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        ((var_s1->unk8 - var_s1->unk24) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        ((var_s1->unk10 - var_s1->unk28) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        0x57,
                        0,
                        0,
                        0,
                        SSSV_RAND(32) + 0x19,
                        var_s1->envColor,
                        var_s1->envColor,
                        0);

                    // temp_t9_39 = var_s1->unk20;
                    // temp_t7_43 = var_s1->unk4;
                    // temp_ret_141 = __ll_rshift((var_s1->unk0 - (temp_t9_39 >> 0x1F)) - (temp_t7_43 < (u32) temp_t9_39), temp_t7_43 - temp_t9_39, 0, 0x10);
                    // spC0 = temp_ret_141;
                    // spC4 = (u32) (u64) temp_ret_141;
                    // temp_t9_40 = var_s1->unk24;
                    // temp_t7_44 = var_s1->unkC;
                    // // temp_s3_3 = func_8012826C() & 0xFFFF;
                    // temp_ret_142 = __ll_rshift((var_s1->unk8 - (temp_t9_40 >> 0x1F)) - (temp_t7_44 < (u32) temp_t9_40), temp_t7_44 - temp_t9_40, 0, 0x10);
                    // spC8 = temp_ret_142;
                    // spCC = (u32) (u64) temp_ret_142;
                    // temp_t9_41 = var_s1->unk28;
                    // temp_t7_45 = var_s1->unk14;
                    // // temp_s4 = func_8012826C() & 0xFFFF;
                    // temp_ret_143 = __ll_rshift((var_s1->unk10 - (temp_t9_41 >> 0x1F)) - (temp_t7_45 < (u32) temp_t9_41), temp_t7_45 - temp_t9_41, 0, 0x10);
                    // spD0 = temp_ret_143;
                    // spD4 = (u32) (u64) temp_ret_143;
                    // temp_s2_19 = func_8012826C() & 0xFFFF;
                    // temp_t0_217 = var_s1->unk32;
                    create_particle_effect(
                        ((var_s1->unk0 - var_s1->unk20) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        ((var_s1->unk8 - var_s1->unk24) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        ((var_s1->unk10 - var_s1->unk28) >> 0x10) + (SSSV_RAND(32) - 0x14),
                        0x57,
                        0,
                        0,
                        0,
                        SSSV_RAND(32) + 0x19,
                        var_s1->envColor,
                        var_s1->envColor,
                        0);
                    // temp_t0_218 = *temp_s0;
                    // *temp_s0 = temp_t0_218 + 8;
                    // temp_t0_218->words.w1 = 0;
                    // temp_t0_218->words.w0 = 0xF5800270;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0070, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    // temp_t0_219 = *temp_s0;
                    // *temp_s0 = temp_t0_219 + 8;
                    // temp_t0_219->words.w0 = 0xFA000000;
                    // temp_t0_219->words.w1 = (((s32) (colorPriRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorPriRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorPriRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    // temp_t0_220 = *temp_s0;
                    // *temp_s0 = temp_t0_220 + 8;
                    // temp_t0_220->words.w0 = 0xFB000000;
                    // temp_t0_220->words.w1 = (((s32) (colorEnvRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorEnvRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorEnvRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);
                    // temp_t4_45 = temp_fp << 8;
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);

                    D_803DA0FC = (SIN(var_s1->unk34 << 2) >> 0xA) * SIN(var_s1->unk34 << 4);
                    D_803DA100 = (SIN(var_s1->unk34 << 2) >> 0xA) * COS(var_s1->unk34 << 4);
                    D_803DA104 = ((COS(var_s1->unk34 << 1) >> 0xA) * COS(var_s1->unk34 << 3)) + COS(var_s1->unk34 << 2);

                    D_803DA0FC = var_s1->unk0 >> 0x10; // (u32) (u64) __ll_rshift(var_s1->unk0, var_s1->unk4, 0, 0x10);
                    D_803DA100 = var_s1->unk8 >> 0x10; // (u32) (u64) __ll_rshift(var_s1->unk8, var_s1->unkC, 0, 0x10);
                    D_803DA104 = var_s1->unk10 >> 0x10; //(u32) (u64) __ll_rshift(var_s1->unk10, var_s1->unk14, 0, 0x10);
                    if ((D_803DA0FC > -1000) && (D_803DA0FC < 5500) && (D_803DA100 > -1000) && (D_803DA100 < 7600) && (D_803DA104 > -500) && (D_803DA104 < 2500)) {
                        var_s1->unk18 = 0;
                    }
                    break;

                case 0x57:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);

                    var_s1->size -= 3;
                    if (var_s1->size < 3) {
                        var_s1->unk18 = 0;
                    }
                    break;
                case 0x58:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0x1F, 0x1F, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x59:

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0100, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    D_803DA0FC = (SIN((sp7E2 & 7) * 50) >> 0xA) * SIN((var_s1->unk34 + ((sp7E2 & 7) * 20)) << 4);
                    D_803DA100 = (SIN((sp7E2 & 7) * 50) >> 0xA) * COS((var_s1->unk34 + ((sp7E2 & 7) * 20)) << 4);
                    D_803DA104 = (COS((sp7E2 & 7) * 50) >> 0xA) * COS((var_s1->unk34 + ((sp7E2 & 7) * 20)) << 3);

                    var_s1->unk10 += 0x20000;

                    if (var_s1->unk34 != 0) {
                        var_s1->unk34--;
                    } else {
                        var_s1->unk18 = 0;
                    }
                    temp_fp = var_s1->unk34 + var_s1->size;
                    func_8032F170_740820(dl, var_s1->unk0 + D_803DA0FC, var_s1->unk8 + D_803DA100, var_s1->unk10 + D_803DA104, 0x1F, 0x1F, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x5A:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x0, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x5B:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x20, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x30, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x5C:
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0U;
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x10, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x20, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x5D:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x5) * 0x10, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x6) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;

                case 0x5E:
                case 0x5F:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0xB) * 0x10, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0xC) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x63:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x140, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);

                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    if (var_s1->size < var_s1->unk34) {
                        var_s1->size += SSSV_RAND(8);
                    }
                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, (s32) (D_803A6CC0_7B8370 * (temp_fp << 8)) >> 8, 0, 0);
                    break;
                case 0x64:
                case 0x65:
                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0U;
                        var_s4 = 0;
                        lodFraction = 0;
                    }

                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x120, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 * 0x10) + 0x130, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x66:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0030, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    D_803DA0FC = SIN(guRandom() % 255) * 10;
                    D_803DA100 = COS(guRandom() % 255) * 10;
                    D_803DA104 = COS(guRandom() % 255) * 10;

                    for (var_s0 = 0; var_s0 < 5; var_s0++) {
                        create_particle_effect(
                            ((var_s1->unk0 + D_803DA0FC) >> 0x10),
                            ((var_s1->unk8 + D_803DA100) >> 0x10),
                            ((var_s1->unk10 + D_803DA104) >> 0x10),
                            0x6E,
                            0,
                            0,
                            0,
                            4,
                            0,
                            0,
                            0);
                    }
                    break;
                case 0x69:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0xC) * 0x10, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0xD) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    if (var_s4 >= particle->unkC) {
                        var_s1->unk2D = 0U;
                    }

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x6A:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x1B) * 0x10, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x1C) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x6B:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x1E) * 0x10, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x1F) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xC8);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 9, 0, 0);
                    break;
                case 0x6C:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x6) * 0x10, 0, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, (var_s4 + 0x7) * 0x10, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xB4);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xB4);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x6D:
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_4b, 1, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);

                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, 0, colorPriRGBA5551, 0x19);
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0x19);

                    func_8032F170_740820(dl, var_s1->unk0, var_s1->unk8, var_s1->unk10, 0xF, 0xF, temp_fp << 8, temp_fp << 8, 0, 0);
                    break;
                case 0x6E:
                    lodFraction = (var_s1->unk18 << 4);
                    // *temp_s0 = temp_t0_3 + 8;
                    // temp_t0_3->words.w0 = 0xF5880800;
                    // temp_t0_3->words.w1 = 0;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0000, G_TX_RENDERTILE, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    // temp_t0_262 = *temp_s0;
                    // *temp_s0 = temp_t0_262 + 8;
                    // temp_t0_262->words.w1 = 0x01000000;
                    // temp_t0_262->words.w0 = 0xF5880880;
                    gDPSetTile((*dl)++, G_IM_FMT_I, G_IM_SIZ_8b, 4, 0x0080, 1, 0, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD, G_TX_NOMIRROR | G_TX_WRAP, G_TX_NOMASK, G_TX_NOLOD);
                    // temp_t0_263 = *temp_s0;
                    // *temp_s0 = temp_t0_263 + 8;
                    // temp_t0_263->words.w0 = ((var_s1->unk18 * 0x10) & 0xFF & 0xFF) | 0xFA000000;
                    // temp_t0_263->words.w1 = (((s32) (colorPriRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorPriRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorPriRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetPrimColorRGBA5551CustomAlpha((*dl)++, 0, lodFraction, colorPriRGBA5551, 0xFF);

                    // temp_t0_264 = *temp_s0;
                    // *temp_s0 = temp_t0_264 + 8;
                    // temp_t0_264->words.w0 = 0xFB000000;
                    // temp_t0_264->words.w1 = (((s32) (colorEnvRGBA5551 & 0xF800) >> 8) << 0x18) | ((((s32) (colorEnvRGBA5551 & 0x7C0) >> 3) & 0xFF) << 0x10) | ((((colorEnvRGBA5551 & 0x3E) * 4) & 0xFF) << 8) | 0xFF;
                    gDPSetEnvColorRGBA5551CustomAlpha((*dl)++, colorEnvRGBA5551, 0xFF);

                    D_803DA0FC = (SIN(var_s1->unk34 << 2) >> 0xA) * SIN(var_s1->unk34 << 4);
                    D_803DA100 = (SIN(var_s1->unk34 << 2) >> 0xA) * COS(var_s1->unk34 << 4);
                    D_803DA104 = ((COS(var_s1->unk34 << 1) >> 0xA) * COS(var_s1->unk34 << 3)) + COS(var_s1->unk34 << 2);
                    D_803DA108 = SIN(((var_s1->unk34 << 2) + (sp7E2 << 6)) & 0x7F) >> 3;
                    // temp_t9_42 = var_s1->unk14 + 0x80000U;

                    // var_s1->unk14 = temp_t9_42;
                    // var_s1->unk10 = (s32) (var_s1->unk10 + (temp_t9_42 < 0x80000U));
                    var_s1->unk10 += 0x80000;
                    var_s1->unk34 += 4; //(u16) (var_s1->unk34 + 4);
                    func_8032F170_740820(dl, var_s1->unk0 + D_803DA0FC, var_s1->unk8 + D_803DA100, var_s1->unk10 + D_803DA104, 0x1F, 0x1F, D_803DA108, temp_fp << 8, 0, 0);
                    break;

                }
            } else if (sp806 == 0) {
                sp806 = 1;
            }
        }
        var_s1++;
    }

    for (k = 0; k < 8; k++) {
        gSPEndDisplayList(D_801D9E98[k]++);
    }

}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/overlay2_6DCA10/func_802CB394_6DCA44.s")
#endif

// only called with these values:
// func_802D5AD8_6E7188(0, 1) (enable dl 0)
// func_802D5AD8_6E7188(1, 8) (enable dl 1 thu 7)
void func_802D5AD8_6E7188(s16 start, s16 end) {
    s16 i;

    for (i = start; i < end; i++) {
        if (D_803D6120.unk3FC8[i] == 1) {
            gSPDisplayList(D_801D9E7C++, &D_80204278->unk109A0[i]);
        }
    }
}

// ESA: func_800A3CC4
s32 create_particle_effect_2(s32 x, s32 z, s32 y, s16 id, s16 size, u16 color1, u16 color2, u16 arg7) {
    u8 used; // sp3F
    u16 rand;

    s32 temp_v0_2;
    s32 temp_v0_3;
    struct036 *particle;
    struct099 *var_t2;

    s32 pad;

    D_803D6120.used++;
    if (D_803D6120.used >= 0xFF) {
        D_803D6120.used = 0;
    }

    while ((D_803D6120.particles[D_803D6120.used].unk1A == 1) || ((D_803D6120.particles[D_803D6120.used].unk38 & 2) && (D_803D6120.particles[D_803D6120.used].unk18 != 0))) {
        D_803D6120.used++; // = temp_t7_2;
        if (D_803D6120.used >= 0xFF) {
            D_803D6120.used = 0;
        }
    }

    var_t2 = &D_803A20C0_7B3770[id];

    if (((var_t2->unk0 & 0x400) == 0)) {
        temp_v0_2 = func_802EA004_6FB6B4(x << 0x10, z << 0x10, y << 0x10, size);
        if ((temp_v0_2 == 2) || (temp_v0_2 == 1)) {
            return 0;
        }
    }

    rand = func_8012826C();
    used = D_803D6120.used;

    if (id == 0x78) {
        id = SSSV_RAND(2) + 0x19;
        arg7 = (guRandom() % size) + size;
        color1 = GPACK_RGBA5551(248, 200, 0, 0); // yellow
        color2 = GPACK_RGBA5551(248, 0, 0, 0);   // red
    }

    D_803D6120.particles[used].unk38 = 0;
    D_803D6120.particles[used].id = id;

    temp_v0_3 = func_80310F58_722608(x, z);

    particle = &D_803D6120.particles[used];
    if (temp_v0_3 < (y << 0x10)) {
        particle->unk38 |= 1;
    }
    if (var_t2->unk0 & 0x1000) {
        particle->unk38 |= 2;
    }

    if ((var_t2->unk0 & 0x800) && (temp_v0_3 != 0x40000000) && ((y << 0x10) < temp_v0_3)) {
        return 0;
    }

    particle->unk34 = arg7;

    particle->unk20 = 0;
    particle->unk24 = 0;
    particle->unk28 = 0;

    if (var_t2->unk0 & 0x100) {
        particle->unk1A = 1;
    } else {
        particle->unk1A = 0;
    }

    particle->unk0 = (x << 0x10);
    particle->unk8 = (z << 0x10);
    particle->unk10 = (y << 0x10);

    particle->unk2E = var_t2->unk2;
    particle->unk18 = var_t2->unk4;

    if (size == 0) {
        particle->size = var_t2->unk2;
    } else {
        particle->size = size;
    }

    if (color1 == 0) {
        particle->primaryColor = var_t2->unkE;
    } else {
        particle->primaryColor = color1;
    }

    if (color2 == 0) {
        particle->envColor = var_t2->unk10;
    } else {
        particle->envColor = color2;
    }

    particle->unk2D = 0;
    particle->unk36 = 0;

    switch (id) {
    case 38:
        particle->unk18 -= rand & 7;
        break;
    case 0:
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 25:
    case 48:
        if (id) {}; // fix regalloc
        particle->unk36 = arg7;
        break;
    }

    particle->unk18 = var_t2->unk4;
    D_803D6120.used++;
    return 1;
}

// s16 D_803A231C_7B39CC = 0x26;
extern s16 D_803A231C_7B39CC;

// arg3 = particle 38 --> Zzzzz...
s32 create_particle_effect(s32 x, s32 z, s32 y, s16 id, s32 arg4, s32 arg5, s32 arg6, s16 size, u16 color1, u16 color2, u16 argA) {
    s16 pad[4];
    s32 tmpy;
    s32 temp;
    s16 sp3E;
    u8  used;
    struct036 *particle;
    s32 temp_v0;

    if (func_8029A334_6AB9E4(x, z, y) == 0) {
        return 0;
    }

    sp3E = 0;

    tmpy = y;
    temp_v0 = func_80310F58_722608(x, z);
    if (temp_v0 < (tmpy << 0x10)) {
        sp3E = 1;
    }

    temp = D_803A20C0_7B3770[id].unk0;
    if (((temp) & 0x800) && (temp_v0 != 0x40000000) && (temp_v0 > (y << 0x10))) {
        return 0;
    }

    pad[3] = id; // force stack
    D_803D6120.used++;
    if (D_803D6120.used >= 0xFF) {
        D_803D6120.used = 0;
    }
    while ((D_803D6120.particles[D_803D6120.used].unk1A == 1) || ((D_803D6120.particles[D_803D6120.used].unk38 & 2) && (D_803D6120.particles[D_803D6120.used].unk18 != 0))) {
        D_803D6120.used++;
        if (D_803D6120.used >= 0xFF) {
            D_803D6120.used = 0;
        }
    }

    used = D_803D6120.used;

    if ((temp & 0x400) == 0) {
        if (func_802EA004_6FB6B4(x << 0x10, z << 0x10, y << 0x10, size) == 2) {
            return 0;
        }
    }

    particle = &D_803D6120.particles[used];
    particle->unk38 = 0;

    if (sp3E != 0) {
        particle->unk38 |= 1;
    }
    particle->unk0 = x << 0x10;
    particle->unk8 = z << 0x10;
    particle->unk10 = y << 0x10;

    particle->unk18 = D_803A20C0_7B3770[id].unk4;

    // overrides
    switch (id) {
    case 0x67:
        if (argA) {
            particle->unk18 = argA;
        }
        break;
    case 0x78:
        id = SSSV_RAND(2) + 25;
        argA = (guRandom() % size) + size + 2;
        color1 = GPACK_RGBA5551(248, 200, 0, 0);  // yellow
        color2 = GPACK_RGBA5551(248, 0, 0, 0);    // red
        particle->unk18 = D_803A20C0_7B3770[id].unk4;
        break;
    case 0x79:
        id = SSSV_RAND(2) + 25;
        argA = (guRandom() % size) + 0xB;
        arg4 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg5 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg6 = SSSV_RAND(0x10000) * 2;
        size = SSSV_RAND(4);
        color1 = GPACK_RGBA5551(128, 192 + SSSV_RAND(64), 0, 1);
        color2 = GPACK_RGBA5551(65 + SSSV_RAND(16), 160, 72, 1);
        particle->unk18 = D_803A20C0_7B3770[id].unk4;
        break;
    case 0x7A:
        id = SSSV_RAND(2) + 25;
        argA = (guRandom() % size) + 0x29;
        arg4 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg5 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg6 = SSSV_RAND(0x4000);
        size = SSSV_RAND(16);
        color1 = GPACK_RGBA5551(248, 248, 248, 1); // white
        color2 = GPACK_RGBA5551(248, 248, 248, 1); // white
        particle->unk18 = D_803A20C0_7B3770[id].unk4;
        break;
    case 0x7B:
        id = 0x19;
        argA = (guRandom() % 8) + 0x10;
        if (color1 == 0) {
            color1 = GPACK_RGBA5551(176, 176, 176, 1); // grey
            color2 = GPACK_RGBA5551(120, 120, 120, 1); // darker grey
        }
        arg4 += SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg5 += SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg6 += SSSV_RAND(0x4000);
        particle->unk18 = D_803A231C_7B39CC;
        break;
    case 0x6B:
        particle->unk28 += SSSV_RAND(0x10000);
        break;
    case 0x30:
        particle->unk36 = argA;
        break;
    case 0x22:
        particle->size = SSSV_RAND(8) + 2;
        break;
    case 0x7C:
        id = SSSV_RAND(2) + 25;
        argA = (guRandom() % size) + 11;
        arg4 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg5 = SSSV_RAND(0x10000) - FTOFIX32(0.6103515625);
        arg6 = SSSV_RAND(0x10000) * 2;
        size = SSSV_RAND(4);
        color1 = GPACK_RGBA5551(172 + (SSSV_RAND(32)), 88, 8, 1);
        color2 = GPACK_RGBA5551(114 + (SSSV_RAND(32)), 72, 8, 1);
        particle->unk18 = D_803A20C0_7B3770[id].unk4;
        break;
    case 0xA:
        if (argA == 0) {
            argA = 1;
        }
        break;
    case 0x1E:
    case 0x1F:
    case 0x20:
        if (argA != 0) {
            particle->unk18 = argA;
        }
        break;
    }

    if (D_803A20C0_7B3770[id].unk0 & 0x1000) {
        particle->unk38 |= 2;
    }

    particle->id = id;
    particle->unk20 = arg4;
    particle->unk24 = arg5;
    particle->unk28 = arg6;

    if (color1 == 0) {
        particle->primaryColor = D_803A20C0_7B3770[id].unkE;
    } else {
        particle->primaryColor = color1;
    }

    if (color2 == 0) {
        particle->envColor = D_803A20C0_7B3770[id].unk10;
    } else {
        particle->envColor = color2;
    }

    if (D_803A20C0_7B3770[id].unk0 & 0x100) {
        particle->unk1A = 1;
    } else {
        particle->unk1A = 0;
    }

    particle->unk34 = argA;

    if (size == 0) {
        particle->size = D_803A20C0_7B3770[id].unk2;
    } else {
        particle->size = size;
    }

    particle->unk2E = D_803A20C0_7B3770[id].unk2;
    particle->unk2D = 0;
    particle->unk36 = 0;

    return 1;
}

// ESA: func_800A4668
void func_802D6738_6E7DE8(void) {
    s16 pad1[10];
    s16 sp7A;
    s16 sp78;
    s16 sp76;

    s16 pad2[12];

    s16 i;

    func_8012826C();
    func_8012826C();
    func_8012826C();
    func_8012826C();

    D_803D6120.unk3FD0 += 1;
    if (D_803F2D50.unk1C != 0) {
        for (i = 0; i < D_803F2D50.unk1C; i++) {
            // get camera location? get viewport?
            func_80343720_754DD0(&sp7A, &sp78, &sp76);
            create_particle_effect(
                sp7A,
                sp78,
                sp76,
                55,
                0,
                0,
                0,
                0,
                GPACK_RGBA5551(0, 0, 0, 0),
                GPACK_RGBA5551(0, 0, 0, 0),
                0);
        }
    }

    if (D_803F2D50.unk1E != 0) {
        for (i = 0; i < D_803F2D50.unk1E; i++) {
            func_80343720_754DD0(&sp7A, &sp78, &sp76);
            create_particle_effect(
                sp7A,
                sp78,
                sp76,
                57,
                0,
                0,
                0,
                0,
                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                GPACK_RGBA5551(D_803E1BBA, D_803E1BBB, D_803E1BBC, 1),
                0);
        }
    }
    if (D_803F2D50.unk1E != 0) {
        D_803D6120.unk3FD2 = 0x3FF;
    } else {
        D_803D6120.unk3FD2 = 0;
    }

    if (D_803D6120.unk3FD2 != 0) {
        if ((func_8012826C() & D_803D6120.unk3FD2) == 1) {
            D_803D6120.unk3FD4 = 1;
        }
    }

    if (D_803D6120.unk3FD4 != 0) {
        D_803D6120.unk3FD4 = D_803D6120.unk3FD4 + 1;
        D_803D6120.unk3FD4 = D_803D6120.unk3FD4 & 7;
        if (SSSV_RAND(2)) {
            D_80204278->lights.a.l.colc[0] = 0xFF;
            D_80204278->lights.a.l.col[0] = D_80204278->lights.a.l.colc[0];
            D_80204278->lights.a.l.colc[1] = 0xFF;
            D_80204278->lights.a.l.col[1] = D_80204278->lights.a.l.colc[1];
            D_80204278->lights.a.l.colc[2] = 0xFF;
            D_80204278->lights.a.l.col[2] = D_80204278->lights.a.l.colc[2];
            D_80204278->lights.l[0].l.colc[0] = 0xFF;
            D_80204278->lights.l[0].l.col[0] = D_80204278->lights.l[0].l.colc[0];
            D_80204278->lights.l[0].l.colc[1] = 0xFF;
            D_80204278->lights.l[0].l.col[1] = D_80204278->lights.l[0].l.colc[1];
            D_80204278->lights.l[0].l.colc[2] = 0xFF;
            D_80204278->lights.l[0].l.col[2] = D_80204278->lights.l[0].l.colc[2];
        } else if (D_803D6120.unk3FD2 != 0) {
            D_80204278->lights.a.l.colc[0] = 0x50;
            D_80204278->lights.a.l.col[0] = D_80204278->lights.a.l.colc[0];
            D_80204278->lights.a.l.colc[1] = 0x50;
            D_80204278->lights.a.l.col[1] = D_80204278->lights.a.l.colc[1];
            D_80204278->lights.a.l.colc[2] = 0x50;
            D_80204278->lights.a.l.col[2] = D_80204278->lights.a.l.colc[2];
            D_80204278->lights.l[0].l.colc[0] = 0x50;
            D_80204278->lights.l[0].l.col[0] = D_80204278->lights.l[0].l.colc[0];
            D_80204278->lights.l[0].l.colc[1] = 0x50;
            D_80204278->lights.l[0].l.col[1] = D_80204278->lights.l[0].l.colc[1];
            D_80204278->lights.l[0].l.colc[2] = 0x50;
            D_80204278->lights.l[0].l.col[2] = D_80204278->lights.l[0].l.colc[2];
        }
    } else if (D_803D6120.unk3FD2 != 0) {
        D_80204278->lights.a.l.colc[0] = 0x50;
        D_80204278->lights.a.l.col[0] = D_80204278->lights.a.l.colc[0];
        D_80204278->lights.a.l.colc[1] = 0x50;
        D_80204278->lights.a.l.col[1] = D_80204278->lights.a.l.colc[1];
        D_80204278->lights.a.l.colc[2] = 0x50;
        D_80204278->lights.a.l.col[2] = D_80204278->lights.a.l.colc[2];
        D_80204278->lights.l[0].l.colc[0] = 0x50;
        D_80204278->lights.l[0].l.col[0] = D_80204278->lights.l[0].l.colc[0];
        D_80204278->lights.l[0].l.colc[1] = 0x50;
        D_80204278->lights.l[0].l.col[1] = D_80204278->lights.l[0].l.colc[1];
        D_80204278->lights.l[0].l.colc[2] = 0x50;
        D_80204278->lights.l[0].l.col[2] = D_80204278->lights.l[0].l.colc[2];
    }
    if (D_803F2D50.segment == 1) {
        sp7A = RAND(63) + 4;
        sp78 = RAND(127) + 8;
        if (((D_803C0740[sp7A][sp78].unk0 != D_803C0740[sp7A + 1][sp78 + 1].unk0) || (D_803C0740[sp7A][sp78].unk0 != D_803C0740[sp7A - 1][sp78 - 1].unk0)) && (D_803C0740[sp7A][sp78].unk6 == 0)) {
            create_particle_effect_2(sp7A << 6, sp78 << 6, D_803C0740[sp7A][sp78].unk0 << 3, 53, 0, 0, 0, 5);
        } else {
            sp7A = RAND(63) + 4;
            sp78 = RAND(127) + 8;
            if (((D_803C0740[sp7A][sp78].unk0 != D_803C0740[sp7A + 1][sp78 + 1].unk0) || (D_803C0740[sp7A][sp78].unk0 != D_803C0740[sp7A - 1][sp78 - 1].unk0)) && (D_803C0740[sp7A][sp78].unk6 == 0)) {
                create_particle_effect_2(sp7A << 6, sp78 << 6, D_803C0740[sp7A][sp78].unk0 << 3, 53, 0, 0, 0, 5);
            }
        }
    }
    if ((D_803F2D50.unk4C == 0) || (D_803F2D50.unk4C == 3)) {
        for (i = 0; i < 5; i++) {
            sp7A = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.xPos.h - 960;
            sp78 = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.zPos.h - 960;
            if (sp7A < 0) {
                sp7A = 0;
            }
            if (sp78 < 0) {
                sp78 = 0;
            }
            sp7A += RAND(960) * 2;
            sp78 += RAND(960) * 2;
            sp76 = func_80298818_6A9EC8(sp7A, sp78);
            if ((sp76 != 0) && ((func_802D7434_6E8AE4(sp7A, sp78) + 64) < sp76)) {
                create_particle_effect_2(
                    sp7A,
                    sp78,
                    sp76,
                    53,
                    0,
                    GPACK_RGBA5551((D_803E1BBA + 511) / 3, (D_803E1BBB + 511) / 3, (D_803E1BBC + 511) / 3, 1),
                    GPACK_RGBA5551((D_803E1BBA + 511) / 3, (D_803E1BBB + 511) / 3, (D_803E1BBC + 511) / 3, 1),
                    2);
            }
        }

        if ((gCameras[gCameraId].unk7C - 12.0f) < func_80298818_6A9EC8((u16) gCameras[gCameraId].unk74, (u16) gCameras[gCameraId].unk78)) {
            sp7A = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.xPos.h - 512;
            sp78 = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.zPos.h - 512;
            if (sp7A < 0) {
                sp7A = 0;
            }
            if (sp78 < 0) {
                sp78 = 0;
            }
            sp7A += RAND(512) * 2;
            sp78 += RAND(512) * 2;
            if (func_80298818_6A9EC8(sp7A, sp78) != 0) {
                sp76 = func_802D7434_6E8AE4(sp7A, sp78);
                func_802D7AD4_6E9184(sp7A, sp78, sp76, RAND(3));
            }
        }
    } else if (D_803F2D50.unk4C != 2) {
        for (i = 0; i < 4; i++) {
            sp7A = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.xPos.h - 960;
            sp78 = D_801D9ED8.animals[gCurrentAnimalIndex].animal->position.zPos.h - 960;
            if (sp7A < 0) {
                sp7A = 0;
            }
            if (sp78 < 0) {
                sp78 = 0;
            }
            sp7A += RAND(960) * 2;
            sp78 += RAND(960) * 2;
            sp76 = func_80298818_6A9EC8(sp7A, sp78);
            if ((sp76 != 0) && ((func_802D7434_6E8AE4(sp7A, sp78) + 64) < sp76)) {
                create_particle_effect_2(sp7A, sp78, sp76, 106, RAND(15) + 10, 0, 0, 0);
            }
        }
    }
}

// ESA: func_800A88BC
s16 func_802D7434_6E8AE4(s16 arg0, s16 arg1) {
    s16 temp_t2;
    s16 temp_t4;

    s32 temp_t6;
    s32 temp_t7;
    s32 temp_t8;
    s32 temp_t9;

    s16 ret;

    temp_t6 = D_803C0740[(s16)(arg0 >> 6) + 0][(s16)(arg1 >> 6) + 0].unk0 << 3;
    temp_t8 = D_803C0740[(s16)(arg0 >> 6) + 0][(s16)(arg1 >> 6) + 1].unk0 << 3;
    temp_t7 = D_803C0740[(s16)(arg0 >> 6) + 1][(s16)(arg1 >> 6) + 1].unk0 << 3;
    temp_t9 = D_803C0740[(s16)(arg0 >> 6) + 1][(s16)(arg1 >> 6) + 0].unk0 << 3;

    temp_t2 = arg0 & 0x3F;
    temp_t4 = arg1 & 0x3F;

    if ((D_803C0740[(s16)(arg0 >> 6) + 0][(s16)(arg1 >> 6) + 0].unk4 & 1)) {
        if (temp_t2 < temp_t4) {
            ret = (((((temp_t7 - temp_t8) * temp_t2) + ((temp_t8 - temp_t6) * temp_t4)) >> 6) + temp_t6);
        } else {
            ret = (((((temp_t9 - temp_t6) * temp_t2) + ((temp_t7 - temp_t9) * temp_t4)) >> 6) + temp_t6);
        }
    } else if ((temp_t2 + temp_t4) < 64) {
        ret = (((((temp_t9 - temp_t6) * temp_t2) + ((temp_t8 - temp_t6) * temp_t4)) >> 6) + temp_t6);
    } else {
        ret = (((((temp_t8 - temp_t7) * (64 - temp_t2)) + ((temp_t9 - temp_t7) * (64 - temp_t4))) >> 6) + temp_t7);
    }

    return ret;
}

#ifdef NON_MATCHING
void func_802D760C_6E8CBC(s16 arg0, s16 arg1, s16 arg2, s16 arg3, s16 arg4) {
    s16 tmp0;
    s16 tmp1;
    s16 tmp2;
    s16 volume;
    s16 temp_s0;
    s16 temp_s2;
    s16 phi_v1;
    s16 i;
    s32 phi_v1_4;
    u16 random;

    if (arg3 < 2) {
        arg3 = 2;
    }

    phi_v1 = ABS(arg4);
    if (phi_v1 > 6) {
        phi_v1 = 6;
    }
    if (phi_v1 < 2) {
        phi_v1 = 2;
    }

    if (arg3 < 17) {
        tmp1 = 0;
    } else if ((arg3 > 16) && (arg3 < 27)) {
        tmp1 = 1;
    } else if (arg3 > 26) {
        tmp1 = 2;
    }

    tmp0 = (tmp1 + 1) << 4;
    if (tmp0 > 25) {
        tmp0 = 25;
    }

    tmp2 = arg3 / 4;
    if (tmp2 < 4) {
        tmp2 = 4;
    }
    if (tmp2 > 24) {
        tmp2 = 24;
    }

    for (i = 0; i < tmp0; i++) {
        temp_s0 = arg0 + ((D_80152350.unk2D0[(s16)(SSSV_RAND(8) + ((360 / tmp0) * i))] * arg3) >> 9);
        temp_s2 = arg1 + ((D_80152350.unk384[(s16)(SSSV_RAND(8) + ((360 / tmp0) * i))] * arg3) >> 9);
        phi_v1_4 = MAX(arg2, func_80298E98_6AA548(temp_s0, temp_s2));
        phi_v1_4 = (s16)(phi_v1_4 + 20);
        random = func_8012826C();
        guRandom();
        create_particle_effect(
            temp_s0,
            temp_s2,
            phi_v1_4,
            24,
            D_80152350.unk2D0[(s16)((360 / tmp0) * i)] * tmp2 << 4,
            D_80152350.unk384[(s16)((360 / tmp0) * i)] * tmp2 << 4,
            ((random & 0x7FFF) << 2) + (phi_v1 << 16),
            2,
            GPACK_RGBA5551((D_803E1BBA + 511) / 3, (D_803E1BBB + 511) / 3, (D_803E1BBC + 511) / 3, 1),
            GPACK_RGBA5551((D_803E1BBA + 511) / 3, (D_803E1BBB + 511) / 3, (D_803E1BBC + 511) / 3, 1),
            0);
    }
    if (tmp1 == 0) {
        volume = 0x5000;
    }
    if (tmp1 == 1) {
        volume = 0x7FFF;
    }
    if (tmp1 == 2) {
        volume = 0x5000;
    }

    if (tmp1 < 2) {
        play_sound_effect_at_location(SFX_UNKNOWN_165, 0x7FFF, 0x80, arg0, arg1, arg2, 1.0f);
    } else {
        play_sound_effect_at_location(SFX_UNKNOWN_76, volume, 0x80, arg0, arg1, arg2, 1.0f);
    }
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/overlay2_6DCA10/func_802D760C_6E8CBC.s")
#endif

// ESA: func_800A8A00
void func_802D7AD4_6E9184(s16 x, s16 z, s16 y, s16 arg3) {
    s16 i;
    s16 tmp = (arg3 * 3) + 1;

    for (i = 0; i < tmp; i++) {
        create_particle_effect_2(
            x + SSSV_RAND(8),
            z + SSSV_RAND(8),
            y,
            28,
            SSSV_RAND(8) + 1,
            0,
            0,
            0);
    }
}

#ifdef NON_MATCHING
// ESA: func_800AB0AC or func_800A8AF0?
void func_802D7BE0_6E9290(s16 id, s16 flags, s16 x, s16 z, s16 y, s16 arg5, u16 color) {

    s16 spBE;
    s16 spBC;
    s16 spBA;

    s16 temp_s4;
    s16 temp_s5;
    s16 temp_s6;
    s16 temp_s7;

    s16 volume;
    s16 i;      // spAE
    s16 j;

    if (arg5 < 2) {
        arg5 = 2;
    }

    if (arg5 < 17) {
        spBC = 0;
    } else if ((arg5 > 16) && (arg5 <= 32)) {
        spBC = 1;
    } else if (arg5 > 31) {
        spBC = 2;
    }

    spBE = SSSV_RAND(2) + spBC + 1;
    if (spBE > 7) {
        spBE = 7;
    }

    spBA = arg5 / 4;
    if (spBA < 4) {
        spBA = 4;
    }
    if (spBA > 24) {
        spBA = 24;
    }

    if (flags & 1) {
        create_particle_effect_2(
            x,
            z,
            y,
            id * 3,
            SSSV_RAND(16) + (spBC * 40) + 20,
            0,
            0,
            0);
        do_rumble(
            0,
            (spBC * 20) + 20,
            (spBC * 20) + 40,
            (spBC * 4) + 4,
            distance_from_player(x, z, y));
    }

    for (i = 0; i < spBE; i++) {

        temp_s6 = (((guRandom() % arg5) * 2) + x) - (u16)arg5;
        temp_s5 = (((guRandom() % arg5) * 2) + z) - (u16)arg5;
        temp_s4 = (((guRandom() % arg5) * 2) + y) - (u16)arg5;

        temp_s7 = ((SSSV_RAND(2)) * 3) + (guRandom() % 3);

        if (flags & 0x20) {
            for (j = 0; j < 4; j++) {
                create_particle_effect_2(
                    (SSSV_RAND(16) + temp_s6) - 6,
                    (SSSV_RAND(16) + temp_s5) - 6,
                    (SSSV_RAND(16) + temp_s4) - 6,
                    28,
                    (SSSV_RAND(8) + 7),
                    0,
                    0,
                    0);
            }
        }

        if (flags & 1) {
            if (SSSV_RAND(4) == 0) {
                create_particle_effect_2(
                    temp_s6,
                    temp_s5,
                    temp_s4,
                    temp_s7,
                    SSSV_RAND(16) + (((spBC * 40) + 20) >> 1),
                    GPACK_RGBA5551(255, 220 - SSSV_RAND(64), 0, 0),
                    GPACK_RGBA5551(255, SSSV_RAND(128) + 60, 0, 0),
                    SSSV_RAND(8));
            } else {
                create_particle_effect_2(
                    temp_s6,
                    temp_s5,
                    temp_s4,
                    temp_s7,
                    SSSV_RAND(16) + (((spBC * 40) + 20) >> 1),
                    GPACK_RGBA5551(255, 220 - SSSV_RAND(64), 0, 0),
                    GPACK_RGBA5551(255, 0, 0, 0),
                    SSSV_RAND(8));
            }
        }

        if (flags & 2) {
            temp_s6 = (((guRandom() % arg5) * 2) + x) - (u16)arg5;
            temp_s5 = (((guRandom() % arg5) * 2) + z) - (u16)arg5;
            temp_s4 = (((guRandom() % arg5) * 2) + y);

            create_particle_effect(
                temp_s6,
                temp_s5,
                temp_s4,
                48,
                0,
                0,
                (SSSV_RAND(0x8000) * 4) + 0x20000,
                2,
                GPACK_RGBA5551(SSSV_RAND(64) + 20, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(64) + 100, SSSV_RAND(64) + 100, SSSV_RAND(64) + 100, 0),
                SSSV_RAND(16));

            temp_s6 = (((guRandom() % arg5) * 2) + x) - (u16)arg5;
            temp_s5 = (((guRandom() % arg5) * 2) + z) - (u16)arg5;
            temp_s4 = (((guRandom() % arg5) * 2) + y);
            create_particle_effect(
                temp_s6,
                temp_s5,
                temp_s4,
                48,
                0,
                0,
                (SSSV_RAND(0x8000) * 4) + 0x20000,
                2,
                GPACK_RGBA5551(SSSV_RAND(64) + 20, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(64) + 100, SSSV_RAND(64) + 100, SSSV_RAND(64) + 100, 0),
                SSSV_RAND(16));
        }
        if (flags & 4) {

            create_particle_effect(
                x,
                z,
                y + 20,
                40,
                (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 8,
                (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 8,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                (SSSV_RAND(8)) + 2,
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                40,
                (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                (SSSV_RAND(8)) + 2,
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                40,
                (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                (SSSV_RAND(8)) + 2,
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                40,
                (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                (SSSV_RAND(8)) + 2,
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                40,
                (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 8,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                (SSSV_RAND(8)) + 2,
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                GPACK_RGBA5551(SSSV_RAND(128) + 100, SSSV_RAND(64), SSSV_RAND(64), 0),
                0);
        }
        if (flags & 8) {
            create_particle_effect(
                x,
                z,
                y + 20,
                ((guRandom() % 6) + 0x47),
                (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                SSSV_RAND(32) + (spBC * 0xA),
                color,
                func_8029A568_6ABC18(color),
                0);
            if ((flags & 4) == 0) {
                create_particle_effect(
                    x,
                    z,
                    y + 20,
                    ((guRandom() % 6) + 0x47),
                    (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                    (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                    (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                    SSSV_RAND(32) + spBC * 0xF,
                    color,
                    func_8029A568_6ABC18(color),
                    0);
                if (spBC > 0) {
                    create_particle_effect(
                        x,
                        z,
                        y + 20,
                        ((guRandom() % 6) + 0x47),
                        (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                        (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                        (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                        SSSV_RAND(32) + spBC * 0xF,
                        color,
                        func_8029A568_6ABC18(color),
                        0);
                }
                if (spBC >= 2) {
                    create_particle_effect(
                        x,
                        z,
                        y + 20,
                        ((guRandom() % 6) + 0x47),
                        (D_80152350.unk2D0[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                        (D_80152350.unk384[((s16) ((guRandom() % 90) + ((360 / spBE) * i)))] * spBA) << 7,
                        (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                        SSSV_RAND(32) + spBC * 0xF,
                        color,
                        func_8029A568_6ABC18(color),
                        0);
                }
            }
        }
        if (flags & 0x10) {
            create_particle_effect(
                x,
                z,
                y + 20,
                (guRandom() % 6) + 0x4D,
                (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                SSSV_RAND(32) + spBC * 0xA,
                color,
                func_8029A568_6ABC18(color),
                0);
            create_particle_effect(
                x,
                z,
                y + 20,
                (guRandom() % 6) + 0x4D,
                (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                SSSV_RAND(32) + spBC * 0xA,
                color,
                func_8029A568_6ABC18(color),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                (guRandom() % 6) + 0x4D,
                (D_80152350.unk2D0[(s16) ((guRandom() % 0xB4) + ((360 / spBE) * i))] * spBA) << 7,
                (D_80152350.unk384[(s16) ((guRandom() % 0xB4) + ((360 / spBE) * i))] * spBA) << 7,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                SSSV_RAND(32) + spBC * 0xA,
                color,
                func_8029A568_6ABC18(color),
                0);

            create_particle_effect(
                x,
                z,
                y + 20,
                (guRandom() % 6) + 0x4D,
                (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                SSSV_RAND(32) + spBC * 0xA,
                color,
                func_8029A568_6ABC18(color), // reduce to 25%
                0);
            if ((flags & 4) == 0) {
                create_particle_effect(
                    x,
                    z,
                    y + 20,
                    (guRandom() % 6) + 0x4D,
                    (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                    (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                    (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                    SSSV_RAND(32) + spBC * 0xF,
                    color,
                    func_8029A568_6ABC18(color),
                    0);
                if (spBC > 0) {
                    create_particle_effect(
                        x,
                        z,
                        y + 20,
                        (guRandom() % 6) + 0x4D,
                        (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                        (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                        (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                        SSSV_RAND(32) + spBC * 0xF,
                        color,
                        func_8029A568_6ABC18(color),
                        0);
                }
                if (spBC >= 2) {
                    create_particle_effect(
                        x,
                        z,
                        y + 20,
                        (guRandom() % 6) + 0x4D,
                        (D_80152350.unk2D0[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                        (D_80152350.unk384[(s16) ((guRandom() % 90) + ((360 / spBE) * i))] * spBA) << 7,
                        (SSSV_RAND(32768) * 4) + FTOFIX32(5.0),
                        SSSV_RAND(32) + spBC * 0xF,
                        color,
                        func_8029A568_6ABC18(color),
                        0);
                }
            }
        }
    }

    if (spBC == 0) {
        volume = 0x5000;
    }
    if (spBC == 1) {
        volume = 0x6800;
    }
    if (spBC == 2) {
        volume = 0x7FFF;
    }
    if ((flags & 0x40) == 0) {
        play_sound_effect_at_location(SFX_UNKNOWN_75, volume, 0x80, x, z, y, 1.0f);
    }
}
#else
#pragma GLOBAL_ASM("asm/nonmatchings/overlay2_6DCA10/func_802D7BE0_6E9290.s")
#endif

// ESA:func_800AAD34
void create_sparks(s16 x, s16 z, s16 y, s16 size, u16 color) {
    s16 tmp0;
    s16 tmp1;
    s16 tmp2;
    s16 tmp3;
    s32 pad[3];
    s16 i;

    if (size < 2) {
        size = 2;
    }

    if (size < 17) {
        tmp1 = 0;
    } else if ((size > 16) && (size < 33)) {
        tmp1 = 1;
    } else if (size > 31) {
        tmp1 = 2;
    }

    tmp0 = ((SSSV_RAND(2) + tmp1) * 3) + 6;
    if (tmp0 > 12) {
        tmp0 = 12;
    }

    tmp2 = size / 4;
    if (tmp2 < 4) {
        tmp2 = 4;
    }
    if (tmp2 > 24) {
        tmp2 = 24;
    }
    guRandom();
    guRandom();
    guRandom();
    for (i = 0; i < tmp0; i++) {
        create_particle_effect(
            x,
            z,
            y,
            35,
            D_80152350.unk2D0[(s16)(RAND(90) + (360 / tmp0) * i)] * tmp2 * 84,
            D_80152350.unk384[(s16)(RAND(90) + (360 / tmp0) * i)] * tmp2 * 84,
            (SSSV_RAND(FTOFIX32(0.5)) * 2) + FTOFIX32(6.0),
            SSSV_RAND(2) + 3,
            color,
            color,
            0);
    }
    func_8012826C();
    if (tmp1 == 0) {
        tmp3 = 0x2000;
    }
    if (tmp1 == 1) {
        tmp3 = 0x2500;
    }
    if (tmp1 == 2) {
        tmp3 = 0x3000;
    }
    play_sound_effect_at_location(SFX_UNKNOWN_77, tmp3, 0x80, x, z, y, 1.0f);
}

// ESA: func_800AB3B8
void do_item_collected_effect(s16 x, s16 z, s16 y, s16 arg3) {
    s16 phi_s0;
    u16 temp_v1;
    s16 i;

    phi_s0 = RAND(4);

    switch (arg3) {
    case 1: // energy ball
        play_sound_effect_at_location(SFX_PICKUP_ENERGY_BALL, 0x6000, 0, x, z, y, 1.0f);
        for (i = 0; i < 8; i++) {
            phi_s0 = (s16)(phi_s0 + 1) % 4;
            create_particle_effect(
                x,
                z,
                y,
                60,
                RAND(128),
                0,
                0,
                16,
                D_803A20B0_7B3760[phi_s0],
                D_803A20B0_7B3760[phi_s0],
                i << 2);
        }
        break;
    case 2: // powercell?
        play_sound_effect_at_location(D_803A1BB0_7B3260[D_803F2D30.powercells].id, 0x6000, 0, x, z, y, D_803A1BB0_7B3260[D_803F2D30.powercells].unk0);
        for (i = 0; i < 8; i++) {
            phi_s0 = (s16)(phi_s0 + 1) % 4;
            create_particle_effect(
                x,
                z,
                y,
                61,
                RAND(128),
                0,
                0,
                16,
                D_803A20B0_7B3760[phi_s0 + 4],
                D_803A20B0_7B3760[phi_s0 + 4],
                i << 2);
        }
        break;
    case 3: // trophy?
        play_sound_effect_at_location(SFX_UNKNOWN_112, 0x6000, 0, x, z, y, 1.0f);
        for (i = 0; i < 16; i++) {
            create_particle_effect(
                (RAND(20) + x) - 12,
                (RAND(20) + z) - 12,
                (RAND(20) + y) - 12,
                89,
                RAND(128),
                0,
                0,
                1,
                GPACK_RGBA5551(RAND(64) + 192, RAND(64) + 192, 0, 1),
                GPACK_RGBA5551(RAND(64) + 192, RAND(64) + 192, 0, 1),
                32);
        }
        break;
    case 4: // key?
        play_sound_effect_at_location(SFX_UNKNOWN_163, 0x5000, 0, x, z, y, 1.0f);
        for (i = 0; i < 16; i++) {
            create_particle_effect(
                (RAND(20) + x) - 12,
                (RAND(20) + z) - 12,
                (RAND(20) + y) - 12,
                89,
                RAND(128),
                0,
                0,
                16,
                GPACK_RGBA5551(RAND(64) + 192, RAND(64) + 192, 0, 1),
                GPACK_RGBA5551(RAND(64) + 192, RAND(64) + 192, 0, 1),
                32);
        }
        break;
    case 5: // objective (e.g. keycard)
    case 6: // objective but no sound?
        if (arg3 == 5) {
            play_sound_effect_at_location(SFX_UNKNOWN_78, 0x6000, 0, x, z, y, 1.0f);
        }
        for (i = 0; i < 16; i++) {
            create_particle_effect(
                (RAND(60) + x) - 36,
                (RAND(60) + z) - 36,
                (RAND(60) + y) - 36,
                65,
                RAND(128),
                0,
                0,
                16,
                GPACK_RGBA5551(248, 0, 248, 1),
                GPACK_RGBA5551(248, 0, 248, 1),
                0);
        }
        break;
    default:
        break;
    }
}
